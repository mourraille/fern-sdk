<?php

namespace Brevo\Types;

use Brevo\Core\Json\JsonSerializableType;
use Brevo\Core\Json\JsonProperty;
use Brevo\Core\Types\ArrayType;

/**
 * a Conversations message
 */
class ConversationsMessage extends JsonSerializableType
{
    /**
     * @var ?string $agentId ID of the agent on whose behalf the message was sent (only in messages sent by an agent).
     */
    #[JsonProperty('agentId')]
    public ?string $agentId;

    /**
     * @var ?string $agentName Agent’s name as displayed to the visitor. Only in the messages sent by an agent.
     */
    #[JsonProperty('agentName')]
    public ?string $agentName;

    /**
     * @var ?string $agentUserpic Only set if the agent has uploaded a profile picture.
     */
    #[JsonProperty('agentUserpic')]
    public ?string $agentUserpic;

    /**
     * @var ?array<ConversationsMessageAttachmentsItem> $attachments An array of file attachments.
     */
    #[JsonProperty('attachments'), ArrayType([ConversationsMessageAttachmentsItem::class])]
    public ?array $attachments;

    /**
     * @var ?array<ConversationsMessageBccItem> $bcc An array containing details of the blind carbon copy (BCC) recipients (applicable only to messages in email threads).
     */
    #[JsonProperty('bcc'), ArrayType([ConversationsMessageBccItem::class])]
    public ?array $bcc;

    /**
     * @var ?array<ConversationsMessageCcItem> $cc An array containing details of the carbon copy (CC) recipients (applicable only to messages in email threads).
     */
    #[JsonProperty('cc'), ArrayType([ConversationsMessageCcItem::class])]
    public ?array $cc;

    /**
     * @var ?int $createdAt Timestamp in milliseconds.
     */
    #[JsonProperty('createdAt')]
    public ?int $createdAt;

    /**
     * @var ?ConversationsMessageFile $file
     */
    #[JsonProperty('file')]
    public ?ConversationsMessageFile $file;

    /**
     * @var ?ConversationsMessageForwardedToSourceStatus $forwardedToSourceStatus Status of the message forwarding to the source.
     */
    #[JsonProperty('forwardedToSourceStatus')]
    public ?ConversationsMessageForwardedToSourceStatus $forwardedToSourceStatus;

    /**
     * @var ?ConversationsMessageFrom $from An object containing details about the email sender (applicable only to messages in email threads).
     */
    #[JsonProperty('from')]
    public ?ConversationsMessageFrom $from;

    /**
     * @var ?string $html The HTML content of the message.
     */
    #[JsonProperty('html')]
    public ?string $html;

    /**
     * @var ?string $id Message ID. It can be used for further manipulations with the message.
     */
    #[JsonProperty('id')]
    public ?string $id;

    /**
     * @var ?array<string, mixed> $integrations Integration details.
     */
    #[JsonProperty('integrations'), ArrayType(['string' => 'mixed'])]
    public ?array $integrations;

    /**
     * @var ?bool $isBot `true` for automated messages generated by an AI bot.
     */
    #[JsonProperty('isBot')]
    public ?bool $isBot;

    /**
     * @var ?bool $isMissed `true` for missed and offline messages.
     */
    #[JsonProperty('isMissed')]
    public ?bool $isMissed;

    /**
     * @var ?bool $isMissedByVisitor `true` for unread agent’s messages in finished chats.
     */
    #[JsonProperty('isMissedByVisitor')]
    public ?bool $isMissedByVisitor;

    /**
     * @var ?bool $isPushed `true` for pushed messages
     */
    #[JsonProperty('isPushed')]
    public ?bool $isPushed;

    /**
     * @var ?bool $isTrigger `true` for automatic messages from “Targeted chats & triggers” and API (https://developers.brevo.com/docs/javascript-api-reference#sendautomessage)
     */
    #[JsonProperty('isTrigger')]
    public ?bool $isTrigger;

    /**
     * @var ?string $rawUnsafeHtml Unescaped HTML content of the message (may include unsafe HTML).
     */
    #[JsonProperty('rawUnsafeHtml')]
    public ?string $rawUnsafeHtml;

    /**
     * @var ?string $receivedFrom In two-way integrations, messages sent via REST API can be marked with receivedFrom property and then filtered out when received in a webhook to avoid infinite loop.
     */
    #[JsonProperty('receivedFrom')]
    public ?string $receivedFrom;

    /**
     * @var ?ConversationsMessageReplyTo $replyTo An object containing details of the reply-to email address (applicable only to messages in email threads).
     */
    #[JsonProperty('replyTo')]
    public ?ConversationsMessageReplyTo $replyTo;

    /**
     * @var ?string $sourceMessageId The ID of the message assigned by the integration source.
     */
    #[JsonProperty('sourceMessageId')]
    public ?string $sourceMessageId;

    /**
     * @var ?string $subject The subject line of the email message (only for messages sent to email threads).
     */
    #[JsonProperty('subject')]
    public ?string $subject;

    /**
     * @var ?string $text Message text or name of the attached file
     */
    #[JsonProperty('text')]
    public ?string $text;

    /**
     * @var ?array<ConversationsMessageToItem> $to An array containing details of the recipients (applicable only to messages in email threads).
     */
    #[JsonProperty('to'), ArrayType([ConversationsMessageToItem::class])]
    public ?array $to;

    /**
     * @var ?value-of<ConversationsMessageType> $type `"agent"` for agents’ messages, `"visitor"` for visitors’ messages.
     */
    #[JsonProperty('type')]
    public ?string $type;

    /**
     * @var ?string $visitorId visitor’s ID
     */
    #[JsonProperty('visitorId')]
    public ?string $visitorId;

    /**
     * @param array{
     *   agentId?: ?string,
     *   agentName?: ?string,
     *   agentUserpic?: ?string,
     *   attachments?: ?array<ConversationsMessageAttachmentsItem>,
     *   bcc?: ?array<ConversationsMessageBccItem>,
     *   cc?: ?array<ConversationsMessageCcItem>,
     *   createdAt?: ?int,
     *   file?: ?ConversationsMessageFile,
     *   forwardedToSourceStatus?: ?ConversationsMessageForwardedToSourceStatus,
     *   from?: ?ConversationsMessageFrom,
     *   html?: ?string,
     *   id?: ?string,
     *   integrations?: ?array<string, mixed>,
     *   isBot?: ?bool,
     *   isMissed?: ?bool,
     *   isMissedByVisitor?: ?bool,
     *   isPushed?: ?bool,
     *   isTrigger?: ?bool,
     *   rawUnsafeHtml?: ?string,
     *   receivedFrom?: ?string,
     *   replyTo?: ?ConversationsMessageReplyTo,
     *   sourceMessageId?: ?string,
     *   subject?: ?string,
     *   text?: ?string,
     *   to?: ?array<ConversationsMessageToItem>,
     *   type?: ?value-of<ConversationsMessageType>,
     *   visitorId?: ?string,
     * } $values
     */
    public function __construct(
        array $values = [],
    ) {
        $this->agentId = $values['agentId'] ?? null;
        $this->agentName = $values['agentName'] ?? null;
        $this->agentUserpic = $values['agentUserpic'] ?? null;
        $this->attachments = $values['attachments'] ?? null;
        $this->bcc = $values['bcc'] ?? null;
        $this->cc = $values['cc'] ?? null;
        $this->createdAt = $values['createdAt'] ?? null;
        $this->file = $values['file'] ?? null;
        $this->forwardedToSourceStatus = $values['forwardedToSourceStatus'] ?? null;
        $this->from = $values['from'] ?? null;
        $this->html = $values['html'] ?? null;
        $this->id = $values['id'] ?? null;
        $this->integrations = $values['integrations'] ?? null;
        $this->isBot = $values['isBot'] ?? null;
        $this->isMissed = $values['isMissed'] ?? null;
        $this->isMissedByVisitor = $values['isMissedByVisitor'] ?? null;
        $this->isPushed = $values['isPushed'] ?? null;
        $this->isTrigger = $values['isTrigger'] ?? null;
        $this->rawUnsafeHtml = $values['rawUnsafeHtml'] ?? null;
        $this->receivedFrom = $values['receivedFrom'] ?? null;
        $this->replyTo = $values['replyTo'] ?? null;
        $this->sourceMessageId = $values['sourceMessageId'] ?? null;
        $this->subject = $values['subject'] ?? null;
        $this->text = $values['text'] ?? null;
        $this->to = $values['to'] ?? null;
        $this->type = $values['type'] ?? null;
        $this->visitorId = $values['visitorId'] ?? null;
    }

    /**
     * @return string
     */
    public function __toString(): string
    {
        return $this->toJson();
    }
}
