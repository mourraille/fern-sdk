// This file was auto-generated by Fern from our API Definition.

import type { BaseClientOptions, BaseRequestOptions } from "../../../../BaseClient.js";
import { type NormalizedClientOptionsWithAuth, normalizeClientOptionsWithAuth } from "../../../../BaseClient.js";
import { mergeHeaders } from "../../../../core/headers.js";
import * as core from "../../../../core/index.js";
import * as environments from "../../../../environments.js";
import { handleNonStatusCodeError } from "../../../../errors/handleNonStatusCodeError.js";
import * as errors from "../../../../errors/index.js";
import * as BrevoApi from "../../../index.js";

export declare namespace RewardClient {
    export type Options = BaseClientOptions;

    export interface RequestOptions extends BaseRequestOptions {}
}

export class RewardClient {
    protected readonly _options: NormalizedClientOptionsWithAuth<RewardClient.Options>;

    constructor(options: RewardClient.Options) {
        this._options = normalizeClientOptionsWithAuth(options);
    }

    /**
     * Get code count
     *
     * @param {BrevoApi.GetCodeCountRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.BadRequestError}
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.getCodeCount({
     *         pid: "pid",
     *         cpid: "cpid"
     *     })
     */
    public getCodeCount(
        request: BrevoApi.GetCodeCountRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.GetCodeCountResponse> {
        return core.HttpResponsePromise.fromPromise(this.__getCodeCount(request, requestOptions));
    }

    private async __getCodeCount(
        request: BrevoApi.GetCodeCountRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.GetCodeCountResponse>> {
        const { pid, cpid } = request;
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/code-pools/${core.url.encodePathParam(cpid)}/codes-count`,
            ),
            method: "GET",
            headers: _headers,
            queryParameters: requestOptions?.queryParams,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: _response.body as BrevoApi.GetCodeCountResponse, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 400:
                    throw new BrevoApi.BadRequestError(_response.error.body as unknown, _response.rawResponse);
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "GET",
            "/loyalty/offer/programs/{pid}/code-pools/{cpid}/codes-count",
        );
    }

    /**
     * Returns a reward page
     *
     * @param {BrevoApi.GetLoyaltyOfferProgramsPidOffersRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.FailedDependencyError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.getRewardPageApi({
     *         pid: "pid"
     *     })
     */
    public getRewardPageApi(
        request: BrevoApi.GetLoyaltyOfferProgramsPidOffersRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.GetLoyaltyOfferProgramsPidOffersResponse> {
        return core.HttpResponsePromise.fromPromise(this.__getRewardPageApi(request, requestOptions));
    }

    private async __getRewardPageApi(
        request: BrevoApi.GetLoyaltyOfferProgramsPidOffersRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.GetLoyaltyOfferProgramsPidOffersResponse>> {
        const { pid, limit, offset, state, version } = request;
        const _queryParams: Record<string, unknown> = {
            limit,
            offset,
            state,
            version: version != null ? version : undefined,
        };
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/offers`,
            ),
            method: "GET",
            headers: _headers,
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return {
                data: _response.body as BrevoApi.GetLoyaltyOfferProgramsPidOffersResponse,
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 424:
                    throw new BrevoApi.FailedDependencyError(_response.error.body as unknown, _response.rawResponse);
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "GET",
            "/loyalty/offer/programs/{pid}/offers",
        );
    }

    /**
     * Creates a new reward in the loyalty program.
     *
     * @param {BrevoApi.CreateRewardRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.createReward({
     *         pid: "pid",
     *         name: "name"
     *     })
     */
    public createReward(
        request: BrevoApi.CreateRewardRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.CreateRewardResponse> {
        return core.HttpResponsePromise.fromPromise(this.__createReward(request, requestOptions));
    }

    private async __createReward(
        request: BrevoApi.CreateRewardRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.CreateRewardResponse>> {
        const { pid, ..._body } = request;
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/offers`,
            ),
            method: "POST",
            headers: _headers,
            contentType: "application/json",
            queryParameters: requestOptions?.queryParams,
            requestType: "json",
            body: _body,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: _response.body as BrevoApi.CreateRewardResponse, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "POST",
            "/loyalty/offer/programs/{pid}/offers",
        );
    }

    /**
     * Create a voucher and attribute it to a specific membership.
     *
     * @param {BrevoApi.CreateVoucherRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.BadRequestError}
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.createVoucher({
     *         pid: "pid",
     *         rewardId: "rewardId"
     *     })
     */
    public createVoucher(
        request: BrevoApi.CreateVoucherRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.CreateVoucherResponse> {
        return core.HttpResponsePromise.fromPromise(this.__createVoucher(request, requestOptions));
    }

    private async __createVoucher(
        request: BrevoApi.CreateVoucherRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.CreateVoucherResponse>> {
        const { pid, ..._body } = request;
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/rewards/attribute`,
            ),
            method: "POST",
            headers: _headers,
            contentType: "application/json",
            queryParameters: requestOptions?.queryParams,
            requestType: "json",
            body: _body,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: _response.body as BrevoApi.CreateVoucherResponse, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 400:
                    throw new BrevoApi.BadRequestError(_response.error.body as unknown, _response.rawResponse);
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "POST",
            "/loyalty/offer/programs/{pid}/rewards/attribute",
        );
    }

    /**
     * Creates a request to redeem a voucher.
     *
     * @param {BrevoApi.RedeemVoucherRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.BadRequestError}
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.PreconditionFailedError}
     * @throws {@link BrevoApi.ExpectationFailedError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.redeemVoucher({
     *         pid: "pid"
     *     })
     */
    public redeemVoucher(
        request: BrevoApi.RedeemVoucherRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.Redeem> {
        return core.HttpResponsePromise.fromPromise(this.__redeemVoucher(request, requestOptions));
    }

    private async __redeemVoucher(
        request: BrevoApi.RedeemVoucherRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.Redeem>> {
        const { pid, ..._body } = request;
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/rewards/redeem`,
            ),
            method: "POST",
            headers: _headers,
            contentType: "application/json",
            queryParameters: requestOptions?.queryParams,
            requestType: "json",
            body: _body,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: _response.body as BrevoApi.Redeem, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 400:
                    throw new BrevoApi.BadRequestError(_response.error.body as unknown, _response.rawResponse);
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 412:
                    throw new BrevoApi.PreconditionFailedError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 417:
                    throw new BrevoApi.ExpectationFailedError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "POST",
            "/loyalty/offer/programs/{pid}/rewards/redeem",
        );
    }

    /**
     * Completes voucher redeem request.
     *
     * @param {BrevoApi.CompleteRedeemTransactionRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.BadRequestError}
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.PreconditionFailedError}
     * @throws {@link BrevoApi.ExpectationFailedError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.completeRedeemTransaction({
     *         pid: "pid",
     *         tid: "tid"
     *     })
     */
    public completeRedeemTransaction(
        request: BrevoApi.CompleteRedeemTransactionRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.Redeem> {
        return core.HttpResponsePromise.fromPromise(this.__completeRedeemTransaction(request, requestOptions));
    }

    private async __completeRedeemTransaction(
        request: BrevoApi.CompleteRedeemTransactionRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.Redeem>> {
        const { pid, tid } = request;
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/rewards/redeem/${core.url.encodePathParam(tid)}/complete`,
            ),
            method: "POST",
            headers: _headers,
            queryParameters: requestOptions?.queryParams,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: _response.body as BrevoApi.Redeem, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 400:
                    throw new BrevoApi.BadRequestError(_response.error.body as unknown, _response.rawResponse);
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 412:
                    throw new BrevoApi.PreconditionFailedError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 417:
                    throw new BrevoApi.ExpectationFailedError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "POST",
            "/loyalty/offer/programs/{pid}/rewards/redeem/{tid}/complete",
        );
    }

    /**
     * Revoke attributed vouchers.
     *
     * @param {BrevoApi.RevokeVouchersRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.revokeVouchers({
     *         pid: "pid"
     *     })
     */
    public revokeVouchers(
        request: BrevoApi.RevokeVouchersRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<void> {
        return core.HttpResponsePromise.fromPromise(this.__revokeVouchers(request, requestOptions));
    }

    private async __revokeVouchers(
        request: BrevoApi.RevokeVouchersRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<void>> {
        const { pid, attributedRewardIds } = request;
        const _queryParams: Record<string, unknown> = {
            attributedRewardIds,
        };
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/rewards/revoke`,
            ),
            method: "DELETE",
            headers: _headers,
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: undefined, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "DELETE",
            "/loyalty/offer/programs/{pid}/rewards/revoke",
        );
    }

    /**
     * Validates a reward.
     *
     * @param {BrevoApi.ValidateRewardRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.FailedDependencyError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.validateReward({
     *         pid: "pid"
     *     })
     */
    public validateReward(
        request: BrevoApi.ValidateRewardRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.ValidateRewardResponse> {
        return core.HttpResponsePromise.fromPromise(this.__validateReward(request, requestOptions));
    }

    private async __validateReward(
        request: BrevoApi.ValidateRewardRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.ValidateRewardResponse>> {
        const { pid, ..._body } = request;
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/rewards/validate`,
            ),
            method: "POST",
            headers: _headers,
            contentType: "application/json",
            queryParameters: requestOptions?.queryParams,
            requestType: "json",
            body: _body,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: _response.body as BrevoApi.ValidateRewardResponse, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 424:
                    throw new BrevoApi.FailedDependencyError(_response.error.body as unknown, _response.rawResponse);
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "POST",
            "/loyalty/offer/programs/{pid}/rewards/validate",
        );
    }

    /**
     * Returns reward information.
     *
     * @param {BrevoApi.GetLoyaltyOfferProgramsPidRewardsRidRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.FailedDependencyError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.getRewardInformation({
     *         pid: "pid",
     *         rid: "rid"
     *     })
     */
    public getRewardInformation(
        request: BrevoApi.GetLoyaltyOfferProgramsPidRewardsRidRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.GetLoyaltyOfferProgramsPidRewardsRidResponse> {
        return core.HttpResponsePromise.fromPromise(this.__getRewardInformation(request, requestOptions));
    }

    private async __getRewardInformation(
        request: BrevoApi.GetLoyaltyOfferProgramsPidRewardsRidRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.GetLoyaltyOfferProgramsPidRewardsRidResponse>> {
        const { pid, rid, version } = request;
        const _queryParams: Record<string, unknown> = {
            version: version != null ? version : undefined,
        };
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/rewards/${core.url.encodePathParam(rid)}`,
            ),
            method: "GET",
            headers: _headers,
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return {
                data: _response.body as BrevoApi.GetLoyaltyOfferProgramsPidRewardsRidResponse,
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 424:
                    throw new BrevoApi.FailedDependencyError(_response.error.body as unknown, _response.rawResponse);
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "GET",
            "/loyalty/offer/programs/{pid}/rewards/{rid}",
        );
    }

    /**
     * Get voucher for a contact
     *
     * @param {BrevoApi.GetLoyaltyOfferProgramsPidVouchersRequest} request
     * @param {RewardClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @throws {@link BrevoApi.UnauthorizedError}
     * @throws {@link BrevoApi.ForbiddenError}
     * @throws {@link BrevoApi.NotFoundError}
     * @throws {@link BrevoApi.UnprocessableEntityError}
     * @throws {@link BrevoApi.InternalServerError}
     *
     * @example
     *     await client.reward.getVoucherForAContact({
     *         pid: "pid",
     *         contactId: 1
     *     })
     */
    public getVoucherForAContact(
        request: BrevoApi.GetLoyaltyOfferProgramsPidVouchersRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): core.HttpResponsePromise<BrevoApi.GetLoyaltyOfferProgramsPidVouchersResponse> {
        return core.HttpResponsePromise.fromPromise(this.__getVoucherForAContact(request, requestOptions));
    }

    private async __getVoucherForAContact(
        request: BrevoApi.GetLoyaltyOfferProgramsPidVouchersRequest,
        requestOptions?: RewardClient.RequestOptions,
    ): Promise<core.WithRawResponse<BrevoApi.GetLoyaltyOfferProgramsPidVouchersResponse>> {
        const {
            pid,
            limit,
            offset,
            sort,
            sortField,
            contactId,
            metadata_key_value: metadataKeyValue,
            rewardId,
        } = request;
        const _queryParams: Record<string, unknown> = {
            limit,
            offset,
            sort: sort != null ? sort : undefined,
            sortField: sortField != null ? sortField : undefined,
            contactId,
            metadata_key_value: metadataKeyValue,
            rewardId,
        };
        const _authRequest: core.AuthRequest = await this._options.authProvider.getAuthRequest();
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            _authRequest.headers,
            this._options?.headers,
            requestOptions?.headers,
        );
        const _response = await core.fetcher({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.BrevoApiEnvironment.Default,
                `loyalty/offer/programs/${core.url.encodePathParam(pid)}/vouchers`,
            ),
            method: "GET",
            headers: _headers,
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 60) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return {
                data: _response.body as BrevoApi.GetLoyaltyOfferProgramsPidVouchersResponse,
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            switch (_response.error.statusCode) {
                case 401:
                    throw new BrevoApi.UnauthorizedError(_response.error.body as unknown, _response.rawResponse);
                case 403:
                    throw new BrevoApi.ForbiddenError(_response.error.body as unknown, _response.rawResponse);
                case 404:
                    throw new BrevoApi.NotFoundError(_response.error.body as unknown, _response.rawResponse);
                case 422:
                    throw new BrevoApi.UnprocessableEntityError(
                        _response.error.body as BrevoApi.ErrorModel,
                        _response.rawResponse,
                    );
                case 500:
                    throw new BrevoApi.InternalServerError(_response.error.body as unknown, _response.rawResponse);
                default:
                    throw new errors.BrevoApiError({
                        statusCode: _response.error.statusCode,
                        body: _response.error.body,
                        rawResponse: _response.rawResponse,
                    });
            }
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "GET",
            "/loyalty/offer/programs/{pid}/vouchers",
        );
    }
}
