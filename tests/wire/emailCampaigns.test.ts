// This file was auto-generated by Fern from our API Definition.

import * as BrevoApi from "../../src/api/index";
import { BrevoApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("EmailCampaignsClient", () => {
    test("getEmailCampaigns (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            campaigns: [
                {
                    abTesting: true,
                    id: 12,
                    name: "EN - Sales Summer 2017",
                    previewText: "Don't miss the sale!",
                    scheduledAt: "2017-06-01T12:30:00Z",
                    sendAtBestTime: true,
                    splitRule: 25,
                    status: "sent",
                    subject: "20% OFF for 2017 Summer Sales",
                    subjectA: "Discover the New Collection!",
                    subjectB: "Want to discover the New Collection?",
                    type: "classic",
                    winnerCriteria: "open",
                    winnerDelay: 50,
                    createdAt: "2017-05-01T12:30:00Z",
                    footer: "[DEFAULT_FOOTER]",
                    header: "[DEFAULT_HEADER]",
                    htmlContent: "This is my HTML Content",
                    inlineImageActivation: true,
                    mirrorActive: true,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    recurring: false,
                    replyTo: "replyto@domain.com",
                    returnBounce: 5,
                    sender: { email: "marketing@mycompany.com", id: 26, name: "Marketing" },
                    sentDate: "2018-12-01T16:30:00Z",
                    shareLink: "http://example.com/fhsgccc.html?t=9865448900",
                    tag: "Newsletter",
                    testSent: true,
                    toField: "{FNAME} {LNAME}",
                    utmCampaignValue: "myutm",
                    utmIDActive: true,
                    utmMedium: "EMAIL",
                    utmSource: "Brevo",
                    recipients: { exclusionLists: [13], lists: [5] },
                    statistics: {
                        campaignStats: [
                            {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 5,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                        ],
                        globalStats: {
                            appleMppOpens: 10,
                            clickers: 2665,
                            complaints: 1,
                            deferred: 30,
                            delivered: 19765,
                            estimatedViews: 560,
                            hardBounces: 87,
                            listId: 2,
                            opensRate: 29.54,
                            returnBounce: 5,
                            sent: 19887,
                            softBounces: 100,
                            trackableViews: 5661,
                            trackableViewsRate: 23.45,
                            uniqueClicks: 2300,
                            uniqueViews: 7779,
                            unsubscriptions: 2,
                            viewed: 8999,
                        },
                        linksStats: {},
                        mirrorClick: 120,
                        remaining: 1000,
                        statsByBrowser: {
                            key: { clickers: 2665, uniqueClicks: 2300, uniqueViews: 7779, viewed: 8999 },
                        },
                        statsByDevice: {},
                        statsByDomain: {
                            "hotmail.co.uk": {
                                appleMppOpens: 10,
                                clickers: 2720,
                                complaints: 5,
                                deferred: 30,
                                delivered: 117056,
                                estimatedViews: 560,
                                hardBounces: 0,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 117055,
                                softBounces: 111,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 1970,
                                uniqueViews: 21111,
                                unsubscriptions: 105,
                                viewed: 35251,
                            },
                            "yahoo.com": {
                                appleMppOpens: 10,
                                clickers: 533,
                                complaints: 0,
                                deferred: 30,
                                delivered: 25596,
                                estimatedViews: 560,
                                hardBounces: 0,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 25601,
                                softBounces: 5,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 298,
                                uniqueViews: 3527,
                                unsubscriptions: 17,
                                viewed: 5255,
                            },
                        },
                    },
                },
                {
                    abTesting: true,
                    id: 22,
                    name: "Weekly - 1",
                    previewText: "your weekly newsletter!",
                    scheduledAt: "",
                    sendAtBestTime: true,
                    splitRule: 25,
                    status: "draft",
                    subject: "Week 1 - Newsletter",
                    subjectA: "Discover the New Collection!",
                    subjectB: "Want to discover the New Collection?",
                    type: "classic",
                    winnerCriteria: "open",
                    winnerDelay: 50,
                    createdAt: "2017-05-01T12:30:00Z",
                    footer: "[DEFAULT_FOOTER]",
                    header: "[DEFAULT_HEADER]",
                    htmlContent: "This is my HTML Content",
                    inlineImageActivation: true,
                    mirrorActive: true,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    recurring: false,
                    replyTo: "replyto@domain.com",
                    returnBounce: 5,
                    sender: { email: "newsletter@mycompany.com", id: 26, name: "Newsletter" },
                    sentDate: "2018-12-01T16:30:00Z",
                    shareLink: "http://example.com/fhsgccc.html?t=9865448900",
                    tag: "Newsletter",
                    testSent: false,
                    toField: "{FNAME} {LNAME}",
                    utmCampaignValue: "myutm",
                    utmIDActive: true,
                    utmMedium: "EMAIL",
                    utmSource: "Brevo",
                    recipients: { exclusionLists: [45], lists: [10] },
                    statistics: {
                        campaignStats: [
                            {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 10,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                        ],
                        globalStats: {
                            appleMppOpens: 10,
                            clickers: 2665,
                            complaints: 1,
                            deferred: 30,
                            delivered: 19765,
                            estimatedViews: 560,
                            hardBounces: 87,
                            listId: 2,
                            opensRate: 29.42,
                            returnBounce: 5,
                            sent: 19887,
                            softBounces: 100,
                            trackableViews: 5661,
                            trackableViewsRate: 23.45,
                            uniqueClicks: 2300,
                            uniqueViews: 7779,
                            unsubscriptions: 2,
                            viewed: 8999,
                        },
                        linksStats: {},
                        mirrorClick: 120,
                        remaining: 1000,
                        statsByBrowser: {
                            key: { clickers: 2665, uniqueClicks: 2300, uniqueViews: 7779, viewed: 8999 },
                        },
                        statsByDevice: {},
                        statsByDomain: {
                            aol: {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                            gmail: {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                        },
                    },
                },
            ],
            count: 2,
        };
        server.mockEndpoint().get("/emailCampaigns").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.emailCampaigns.getEmailCampaigns();
        expect(response).toEqual({
            campaigns: [
                {
                    abTesting: true,
                    id: 12,
                    name: "EN - Sales Summer 2017",
                    previewText: "Don't miss the sale!",
                    scheduledAt: "2017-06-01T12:30:00Z",
                    sendAtBestTime: true,
                    splitRule: 25,
                    status: "sent",
                    subject: "20% OFF for 2017 Summer Sales",
                    subjectA: "Discover the New Collection!",
                    subjectB: "Want to discover the New Collection?",
                    type: "classic",
                    winnerCriteria: "open",
                    winnerDelay: 50,
                    createdAt: "2017-05-01T12:30:00Z",
                    footer: "[DEFAULT_FOOTER]",
                    header: "[DEFAULT_HEADER]",
                    htmlContent: "This is my HTML Content",
                    inlineImageActivation: true,
                    mirrorActive: true,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    recurring: false,
                    replyTo: "replyto@domain.com",
                    returnBounce: 5,
                    sender: {
                        email: "marketing@mycompany.com",
                        id: 26,
                        name: "Marketing",
                    },
                    sentDate: "2018-12-01T16:30:00Z",
                    shareLink: "http://example.com/fhsgccc.html?t=9865448900",
                    tag: "Newsletter",
                    testSent: true,
                    toField: "{FNAME} {LNAME}",
                    utmCampaignValue: "myutm",
                    utmIDActive: true,
                    utmMedium: "EMAIL",
                    utmSource: "Brevo",
                    recipients: {
                        exclusionLists: [13],
                        lists: [5],
                    },
                    statistics: {
                        campaignStats: [
                            {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 5,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                        ],
                        globalStats: {
                            appleMppOpens: 10,
                            clickers: 2665,
                            complaints: 1,
                            deferred: 30,
                            delivered: 19765,
                            estimatedViews: 560,
                            hardBounces: 87,
                            listId: 2,
                            opensRate: 29.54,
                            returnBounce: 5,
                            sent: 19887,
                            softBounces: 100,
                            trackableViews: 5661,
                            trackableViewsRate: 23.45,
                            uniqueClicks: 2300,
                            uniqueViews: 7779,
                            unsubscriptions: 2,
                            viewed: 8999,
                        },
                        linksStats: {},
                        mirrorClick: 120,
                        remaining: 1000,
                        statsByBrowser: {
                            key: {
                                clickers: 2665,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                viewed: 8999,
                            },
                        },
                        statsByDevice: {},
                        statsByDomain: {
                            "hotmail.co.uk": {
                                appleMppOpens: 10,
                                clickers: 2720,
                                complaints: 5,
                                deferred: 30,
                                delivered: 117056,
                                estimatedViews: 560,
                                hardBounces: 0,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 117055,
                                softBounces: 111,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 1970,
                                uniqueViews: 21111,
                                unsubscriptions: 105,
                                viewed: 35251,
                            },
                            "yahoo.com": {
                                appleMppOpens: 10,
                                clickers: 533,
                                complaints: 0,
                                deferred: 30,
                                delivered: 25596,
                                estimatedViews: 560,
                                hardBounces: 0,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 25601,
                                softBounces: 5,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 298,
                                uniqueViews: 3527,
                                unsubscriptions: 17,
                                viewed: 5255,
                            },
                        },
                    },
                },
                {
                    abTesting: true,
                    id: 22,
                    name: "Weekly - 1",
                    previewText: "your weekly newsletter!",
                    scheduledAt: "",
                    sendAtBestTime: true,
                    splitRule: 25,
                    status: "draft",
                    subject: "Week 1 - Newsletter",
                    subjectA: "Discover the New Collection!",
                    subjectB: "Want to discover the New Collection?",
                    type: "classic",
                    winnerCriteria: "open",
                    winnerDelay: 50,
                    createdAt: "2017-05-01T12:30:00Z",
                    footer: "[DEFAULT_FOOTER]",
                    header: "[DEFAULT_HEADER]",
                    htmlContent: "This is my HTML Content",
                    inlineImageActivation: true,
                    mirrorActive: true,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    recurring: false,
                    replyTo: "replyto@domain.com",
                    returnBounce: 5,
                    sender: {
                        email: "newsletter@mycompany.com",
                        id: 26,
                        name: "Newsletter",
                    },
                    sentDate: "2018-12-01T16:30:00Z",
                    shareLink: "http://example.com/fhsgccc.html?t=9865448900",
                    tag: "Newsletter",
                    testSent: false,
                    toField: "{FNAME} {LNAME}",
                    utmCampaignValue: "myutm",
                    utmIDActive: true,
                    utmMedium: "EMAIL",
                    utmSource: "Brevo",
                    recipients: {
                        exclusionLists: [45],
                        lists: [10],
                    },
                    statistics: {
                        campaignStats: [
                            {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 10,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                        ],
                        globalStats: {
                            appleMppOpens: 10,
                            clickers: 2665,
                            complaints: 1,
                            deferred: 30,
                            delivered: 19765,
                            estimatedViews: 560,
                            hardBounces: 87,
                            listId: 2,
                            opensRate: 29.42,
                            returnBounce: 5,
                            sent: 19887,
                            softBounces: 100,
                            trackableViews: 5661,
                            trackableViewsRate: 23.45,
                            uniqueClicks: 2300,
                            uniqueViews: 7779,
                            unsubscriptions: 2,
                            viewed: 8999,
                        },
                        linksStats: {},
                        mirrorClick: 120,
                        remaining: 1000,
                        statsByBrowser: {
                            key: {
                                clickers: 2665,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                viewed: 8999,
                            },
                        },
                        statsByDevice: {},
                        statsByDomain: {
                            aol: {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                            gmail: {
                                appleMppOpens: 10,
                                clickers: 2665,
                                complaints: 1,
                                deferred: 30,
                                delivered: 19765,
                                estimatedViews: 560,
                                hardBounces: 87,
                                listId: 2,
                                opensRate: 29.54,
                                returnBounce: 5,
                                sent: 19887,
                                softBounces: 100,
                                trackableViews: 5661,
                                trackableViewsRate: 23.45,
                                uniqueClicks: 2300,
                                uniqueViews: 7779,
                                unsubscriptions: 2,
                                viewed: 8999,
                            },
                        },
                    },
                },
            ],
            count: 2,
        });
    });

    test("getEmailCampaigns (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/emailCampaigns").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.emailCampaigns.getEmailCampaigns();
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("createEmailCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { name: "Newsletter - May 2017", sender: {} };
        const rawResponseBody = { id: 5 };
        server
            .mockEndpoint()
            .post("/emailCampaigns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.emailCampaigns.createEmailCampaign({
            name: "Newsletter - May 2017",
            sender: {},
        });
        expect(response).toEqual({
            id: 5,
        });
    });

    test("createEmailCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { name: "name", sender: {} };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.createEmailCampaign({
                name: "name",
                sender: {},
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("uploadImageToGallery (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { imageUrl: "https://somedomain.com/image1.jpg" };
        const rawResponseBody = {
            url: "https://img.mailinblue.com/100000/images/rnb/original/62casdase8wewq9df1c2f27c.jpeg",
        };
        server
            .mockEndpoint()
            .post("/emailCampaigns/images")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.emailCampaigns.uploadImageToGallery({
            imageUrl: "https://somedomain.com/image1.jpg",
        });
        expect(response).toEqual({
            url: "https://img.mailinblue.com/100000/images/rnb/original/62casdase8wewq9df1c2f27c.jpeg",
        });
    });

    test("uploadImageToGallery (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { imageUrl: "imageUrl" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/images")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.uploadImageToGallery({
                imageUrl: "imageUrl",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getEmailCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            abTesting: true,
            id: 22,
            name: "Weekly - 1",
            previewText: "your weekly newsletter",
            scheduledAt: "2017-09-22T12:30:00Z",
            sendAtBestTime: true,
            splitRule: 25,
            status: "draft",
            subject: "Week 1 - Newsletter",
            subjectA: "Discover the New Collection!",
            subjectB: "Want to discover the New Collection?",
            type: "classic",
            winnerCriteria: "open",
            winnerDelay: 50,
            createdAt: "2017-05-01T12:30:00Z",
            footer: "[DEFAULT_FOOTER]",
            header: "[DEFAULT_HEADER]",
            htmlContent: "This is my HTML Content",
            inlineImageActivation: true,
            mirrorActive: true,
            modifiedAt: "2017-05-01T12:30:00Z",
            recurring: false,
            replyTo: "replyto@domain.com",
            returnBounce: 5,
            sender: { email: "newsletter@mycompany.com", id: 26, name: "Newsletter" },
            sentDate: "2018-12-01T16:30:00Z",
            shareLink: "http://dhh.brevo.com/fhsgccc.html?t=9865448900",
            tag: "Newsletter",
            testSent: false,
            toField: "{FNAME} {LNAME}",
            utmCampaignValue: "myutm",
            utmIDActive: true,
            utmMedium: "EMAIL",
            utmSource: "Brevo",
            recipients: { exclusionLists: [45], lists: [22] },
            statistics: {
                campaignStats: [
                    {
                        appleMppOpens: 10,
                        clickers: 2665,
                        complaints: 1,
                        deferred: 30,
                        delivered: 19765,
                        estimatedViews: 560,
                        hardBounces: 87,
                        listId: 22,
                        opensRate: 29.54,
                        returnBounce: 5,
                        sent: 19887,
                        softBounces: 100,
                        trackableViews: 5661,
                        trackableViewsRate: 23.45,
                        uniqueClicks: 2300,
                        uniqueViews: 7779,
                        unsubscriptions: 2,
                        viewed: 8999,
                    },
                ],
                globalStats: {
                    appleMppOpens: 10,
                    clickers: 2665,
                    complaints: 1,
                    deferred: 30,
                    delivered: 19765,
                    estimatedViews: 560,
                    hardBounces: 87,
                    listId: 2,
                    opensRate: 24.59,
                    returnBounce: 5,
                    sent: 19887,
                    softBounces: 100,
                    trackableViews: 5661,
                    trackableViewsRate: 23.45,
                    uniqueClicks: 2300,
                    uniqueViews: 7779,
                    unsubscriptions: 2,
                    viewed: 8999,
                },
                linksStats: {},
                mirrorClick: 120,
                remaining: 1000,
                statsByBrowser: {
                    internetExplorer: { clickers: 0, uniqueClicks: 0, uniqueViews: 0, viewed: 1 },
                    safari: { clickers: 1, uniqueClicks: 0, uniqueViews: 0, viewed: 1 },
                    thunderbird: { clickers: 1, uniqueClicks: 0, uniqueViews: 0, viewed: 1 },
                },
                statsByDevice: {
                    desktop: { mac: { clickers: 1, uniqueClicks: 0, uniqueViews: 1, viewed: 2 } },
                    mobile: {
                        androidMobile: { clickers: 1, uniqueClicks: 0, uniqueViews: 0, viewed: 1 },
                        iPhone: { clickers: 1, uniqueClicks: 0, uniqueViews: 0, viewed: 2 },
                    },
                    tablet: { key: { clickers: 2665, uniqueClicks: 2300, uniqueViews: 7779, viewed: 8999 } },
                    unknown: { key: { clickers: 2665, uniqueClicks: 2300, uniqueViews: 7779, viewed: 8999 } },
                },
                statsByDomain: {
                    gmail: {
                        appleMppOpens: 10,
                        clickers: 2665,
                        complaints: 1,
                        deferred: 30,
                        delivered: 19765,
                        estimatedViews: 560,
                        hardBounces: 87,
                        listId: 2,
                        opensRate: 29.54,
                        returnBounce: 5,
                        sent: 19887,
                        softBounces: 100,
                        trackableViews: 5661,
                        trackableViewsRate: 23.45,
                        uniqueClicks: 2300,
                        uniqueViews: 7779,
                        unsubscriptions: 2,
                        viewed: 8999,
                    },
                },
            },
        };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.emailCampaigns.getEmailCampaign({
            campaignId: 1000000,
        });
        expect(response).toEqual({
            abTesting: true,
            id: 22,
            name: "Weekly - 1",
            previewText: "your weekly newsletter",
            scheduledAt: "2017-09-22T12:30:00Z",
            sendAtBestTime: true,
            splitRule: 25,
            status: "draft",
            subject: "Week 1 - Newsletter",
            subjectA: "Discover the New Collection!",
            subjectB: "Want to discover the New Collection?",
            type: "classic",
            winnerCriteria: "open",
            winnerDelay: 50,
            createdAt: "2017-05-01T12:30:00Z",
            footer: "[DEFAULT_FOOTER]",
            header: "[DEFAULT_HEADER]",
            htmlContent: "This is my HTML Content",
            inlineImageActivation: true,
            mirrorActive: true,
            modifiedAt: "2017-05-01T12:30:00Z",
            recurring: false,
            replyTo: "replyto@domain.com",
            returnBounce: 5,
            sender: {
                email: "newsletter@mycompany.com",
                id: 26,
                name: "Newsletter",
            },
            sentDate: "2018-12-01T16:30:00Z",
            shareLink: "http://dhh.brevo.com/fhsgccc.html?t=9865448900",
            tag: "Newsletter",
            testSent: false,
            toField: "{FNAME} {LNAME}",
            utmCampaignValue: "myutm",
            utmIDActive: true,
            utmMedium: "EMAIL",
            utmSource: "Brevo",
            recipients: {
                exclusionLists: [45],
                lists: [22],
            },
            statistics: {
                campaignStats: [
                    {
                        appleMppOpens: 10,
                        clickers: 2665,
                        complaints: 1,
                        deferred: 30,
                        delivered: 19765,
                        estimatedViews: 560,
                        hardBounces: 87,
                        listId: 22,
                        opensRate: 29.54,
                        returnBounce: 5,
                        sent: 19887,
                        softBounces: 100,
                        trackableViews: 5661,
                        trackableViewsRate: 23.45,
                        uniqueClicks: 2300,
                        uniqueViews: 7779,
                        unsubscriptions: 2,
                        viewed: 8999,
                    },
                ],
                globalStats: {
                    appleMppOpens: 10,
                    clickers: 2665,
                    complaints: 1,
                    deferred: 30,
                    delivered: 19765,
                    estimatedViews: 560,
                    hardBounces: 87,
                    listId: 2,
                    opensRate: 24.59,
                    returnBounce: 5,
                    sent: 19887,
                    softBounces: 100,
                    trackableViews: 5661,
                    trackableViewsRate: 23.45,
                    uniqueClicks: 2300,
                    uniqueViews: 7779,
                    unsubscriptions: 2,
                    viewed: 8999,
                },
                linksStats: {},
                mirrorClick: 120,
                remaining: 1000,
                statsByBrowser: {
                    internetExplorer: {
                        clickers: 0,
                        uniqueClicks: 0,
                        uniqueViews: 0,
                        viewed: 1,
                    },
                    safari: {
                        clickers: 1,
                        uniqueClicks: 0,
                        uniqueViews: 0,
                        viewed: 1,
                    },
                    thunderbird: {
                        clickers: 1,
                        uniqueClicks: 0,
                        uniqueViews: 0,
                        viewed: 1,
                    },
                },
                statsByDevice: {
                    desktop: {
                        mac: {
                            clickers: 1,
                            uniqueClicks: 0,
                            uniqueViews: 1,
                            viewed: 2,
                        },
                    },
                    mobile: {
                        androidMobile: {
                            clickers: 1,
                            uniqueClicks: 0,
                            uniqueViews: 0,
                            viewed: 1,
                        },
                        iPhone: {
                            clickers: 1,
                            uniqueClicks: 0,
                            uniqueViews: 0,
                            viewed: 2,
                        },
                    },
                    tablet: {
                        key: {
                            clickers: 2665,
                            uniqueClicks: 2300,
                            uniqueViews: 7779,
                            viewed: 8999,
                        },
                    },
                    unknown: {
                        key: {
                            clickers: 2665,
                            uniqueClicks: 2300,
                            uniqueViews: 7779,
                            viewed: 8999,
                        },
                    },
                },
                statsByDomain: {
                    gmail: {
                        appleMppOpens: 10,
                        clickers: 2665,
                        complaints: 1,
                        deferred: 30,
                        delivered: 19765,
                        estimatedViews: 560,
                        hardBounces: 87,
                        listId: 2,
                        opensRate: 29.54,
                        returnBounce: 5,
                        sent: 19887,
                        softBounces: 100,
                        trackableViews: 5661,
                        trackableViewsRate: 23.45,
                        uniqueClicks: 2300,
                        uniqueViews: 7779,
                        unsubscriptions: 2,
                        viewed: 8999,
                    },
                },
            },
        });
    });

    test("getEmailCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getEmailCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getEmailCampaign (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getEmailCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("updateEmailCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server
            .mockEndpoint()
            .put("/emailCampaigns/1000000")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.emailCampaigns.updateEmailCampaign({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("updateEmailCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/emailCampaigns/1000000")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.updateEmailCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateEmailCampaign (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/emailCampaigns/1000000")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.updateEmailCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("deleteEmailCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().delete("/emailCampaigns/1000000").respondWith().statusCode(200).build();

        const response = await client.emailCampaigns.deleteEmailCampaign({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("deleteEmailCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/emailCampaigns/1000000")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.deleteEmailCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteEmailCampaign (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/emailCampaigns/1000000")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.deleteEmailCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("getAbTestCampaignResult (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            clickRate: "50%",
            clickedLinks: {
                "Version A": [
                    { clickRate: "0%", clicksCount: 0, link: "https://google.com" },
                    { clickRate: "0%", clicksCount: 0, link: "https://youtube.com" },
                ],
                "Version B": [
                    { clickRate: "40%", clicksCount: 2, link: "http://www.github.com" },
                    { clickRate: "60%", clicksCount: 3, link: "http://www.stackoverflow.com" },
                ],
            },
            openRate: "100%",
            statistics: {
                clicks: { "Version A": "0%", "Version B": "50%" },
                complaints: { "Version A": "0%", "Version B": "0%" },
                hardBounces: { "Version A": "0%", "Version B": "0%" },
                openers: { "Version A": "20%", "Version B": "100%" },
                softBounces: { "Version A": "0%", "Version B": "0%" },
                unsubscribed: { "Version A": "20%", "Version B": "0%" },
            },
            winningCriteria: "Click",
            winningSubjectLine: "Subject Line A",
            winningVersion: "B",
            winningVersionRate: "0%",
        };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/abTestCampaignResult")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.emailCampaigns.getAbTestCampaignResult({
            campaignId: 1000000,
        });
        expect(response).toEqual({
            clickRate: "50%",
            clickedLinks: {
                "Version A": [
                    {
                        clickRate: "0%",
                        clicksCount: 0,
                        link: "https://google.com",
                    },
                    {
                        clickRate: "0%",
                        clicksCount: 0,
                        link: "https://youtube.com",
                    },
                ],
                "Version B": [
                    {
                        clickRate: "40%",
                        clicksCount: 2,
                        link: "http://www.github.com",
                    },
                    {
                        clickRate: "60%",
                        clicksCount: 3,
                        link: "http://www.stackoverflow.com",
                    },
                ],
            },
            openRate: "100%",
            statistics: {
                clicks: {
                    "Version A": "0%",
                    "Version B": "50%",
                },
                complaints: {
                    "Version A": "0%",
                    "Version B": "0%",
                },
                hardBounces: {
                    "Version A": "0%",
                    "Version B": "0%",
                },
                openers: {
                    "Version A": "20%",
                    "Version B": "100%",
                },
                softBounces: {
                    "Version A": "0%",
                    "Version B": "0%",
                },
                unsubscribed: {
                    "Version A": "20%",
                    "Version B": "0%",
                },
            },
            winningCriteria: "Click",
            winningSubjectLine: "Subject Line A",
            winningVersion: "B",
            winningVersionRate: "0%",
        });
    });

    test("getAbTestCampaignResult (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/abTestCampaignResult")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getAbTestCampaignResult({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getAbTestCampaignResult (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/abTestCampaignResult")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getAbTestCampaignResult({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("emailExportRecipients (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { recipientsType: "all" };
        const rawResponseBody = { processId: 78 };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/exportRecipients")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.emailCampaigns.emailExportRecipients({
            campaignId: 1000000,
            recipientsType: "all",
        });
        expect(response).toEqual({
            processId: 78,
        });
    });

    test("emailExportRecipients (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { recipientsType: "all" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/exportRecipients")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.emailExportRecipients({
                campaignId: 1000000,
                recipientsType: "all",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("emailExportRecipients (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { recipientsType: "all" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/exportRecipients")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.emailExportRecipients({
                campaignId: 1000000,
                recipientsType: "all",
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("sendEmailCampaignNow (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().post("/emailCampaigns/1000000/sendNow").respondWith().statusCode(200).build();

        const response = await client.emailCampaigns.sendEmailCampaignNow({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("sendEmailCampaignNow (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendNow")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendEmailCampaignNow({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("sendEmailCampaignNow (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { message: "message" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendNow")
            .respondWith()
            .statusCode(402)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendEmailCampaignNow({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.PaymentRequiredError);
    });

    test("sendEmailCampaignNow (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendNow")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendEmailCampaignNow({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("sendReport (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            email: {
                body: "Please find attached the report of our last email campaign.",
                to: ["jim.suehan@example.com"],
            },
        };

        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendReport")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.emailCampaigns.sendReport({
            campaignId: 1000000,
            body: {
                email: {
                    body: "Please find attached the report of our last email campaign.",
                    to: ["jim.suehan@example.com"],
                },
            },
        });
        expect(response).toEqual(undefined);
    });

    test("sendReport (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: { body: "body", to: ["to", "to"] } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendReport")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendReport({
                campaignId: 1000000,
                body: {
                    email: {
                        body: "body",
                        to: ["to", "to"],
                    },
                },
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("sendReport (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: { body: "body", to: ["to", "to"] } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendReport")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendReport({
                campaignId: 1000000,
                body: {
                    email: {
                        body: "body",
                        to: ["to", "to"],
                    },
                },
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("sendTestEmail (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendTest")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.emailCampaigns.sendTestEmail({
            campaignId: 1000000,
            body: {},
        });
        expect(response).toEqual(undefined);
    });

    test("sendTestEmail (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendTest")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendTestEmail({
                campaignId: 1000000,
                body: {},
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("sendTestEmail (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/emailCampaigns/1000000/sendTest")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.sendTestEmail({
                campaignId: 1000000,
                body: {},
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("getSharedTemplateUrl (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            sharedUrl: "https://my.brevo.com/pt2YU7R5W_guXlowgumy_VX4pFsKu._zd0Gjj96x1_GMmzc1Qps5ZIpj6nx-",
        };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/sharedUrl")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.emailCampaigns.getSharedTemplateUrl({
            campaignId: 1000000,
        });
        expect(response).toEqual({
            sharedUrl: "https://my.brevo.com/pt2YU7R5W_guXlowgumy_VX4pFsKu._zd0Gjj96x1_GMmzc1Qps5ZIpj6nx-",
        });
    });

    test("getSharedTemplateUrl (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/sharedUrl")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getSharedTemplateUrl({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getSharedTemplateUrl (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/sharedUrl")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getSharedTemplateUrl({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("getSharedTemplateUrl (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { message: "message" };
        server
            .mockEndpoint()
            .get("/emailCampaigns/1000000/sharedUrl")
            .respondWith()
            .statusCode(405)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.getSharedTemplateUrl({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.MethodNotAllowedError);
    });

    test("updateCampaignStatus (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server
            .mockEndpoint()
            .put("/emailCampaigns/1000000/status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.emailCampaigns.updateCampaignStatus({
            campaignId: 1000000,
            body: {},
        });
        expect(response).toEqual(undefined);
    });

    test("updateCampaignStatus (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/emailCampaigns/1000000/status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.updateCampaignStatus({
                campaignId: 1000000,
                body: {},
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateCampaignStatus (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/emailCampaigns/1000000/status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.emailCampaigns.updateCampaignStatus({
                campaignId: 1000000,
                body: {},
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });
});
