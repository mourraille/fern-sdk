// This file was auto-generated by Fern from our API Definition.

import * as BrevoApi from "../../src/api/index";
import { BrevoApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("ExternalFeedsClient", () => {
    test("getAllExternalFeeds (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            count: 18,
            feeds: [
                {
                    id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
                    name: "Product Catalog Feed",
                    alias: "product_catalog_feed",
                    url: "https://api.example.com/products",
                    authType: "noAuth",
                    username: "apiuser",
                    password: "apipass",
                    token: "abc123token456",
                    maxRetries: 3,
                    cache: true,
                    isInternal: false,
                    headers: [{ name: "Authorization", value: "Bearer xyz789" }],
                    createdAt: "2025-09-18T13:29:27Z",
                    modifiedAt: "2025-09-18T13:29:27Z",
                },
                {
                    id: "c2d3e4f5-a6b7-48c9-90d1-e2f3a4b5c6d7",
                    name: "Blog News Feed",
                    alias: "blog_news_feed",
                    url: "https://blog.example.com/api/posts",
                    authType: "noAuth",
                    username: "apiuser",
                    password: "apipass",
                    token: "abc123token456",
                    maxRetries: 3,
                    cache: true,
                    isInternal: true,
                    headers: [{ name: "Authorization", value: "Bearer xyz789" }],
                    createdAt: "2025-09-17T16:03:25Z",
                    modifiedAt: "2025-09-17T16:03:25Z",
                },
                {
                    id: "d3e4f5a6-b7c8-49d0-91e2-f3a4b5c6d7e8",
                    name: "Public Data Feed",
                    alias: "public_data_feed",
                    url: "https://jsonplaceholder.typicode.com/posts",
                    authType: "noAuth",
                    username: "apiuser",
                    password: "apipass",
                    token: "abc123token456",
                    maxRetries: 3,
                    cache: true,
                    isInternal: true,
                    headers: [{ name: "Authorization", value: "Bearer xyz789" }],
                    createdAt: "2025-09-05T09:06:42Z",
                    modifiedAt: "2025-09-05T09:06:42Z",
                },
            ],
        };
        server.mockEndpoint().get("/feeds").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.externalFeeds.getAllExternalFeeds({
            search: "product",
            startDate: "2024-01-01",
            endDate: "2024-01-31",
        });
        expect(response).toEqual({
            count: 18,
            feeds: [
                {
                    id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
                    name: "Product Catalog Feed",
                    alias: "product_catalog_feed",
                    url: "https://api.example.com/products",
                    authType: "noAuth",
                    username: "apiuser",
                    password: "apipass",
                    token: "abc123token456",
                    maxRetries: 3,
                    cache: true,
                    isInternal: false,
                    headers: [
                        {
                            name: "Authorization",
                            value: "Bearer xyz789",
                        },
                    ],
                    createdAt: "2025-09-18T13:29:27Z",
                    modifiedAt: "2025-09-18T13:29:27Z",
                },
                {
                    id: "c2d3e4f5-a6b7-48c9-90d1-e2f3a4b5c6d7",
                    name: "Blog News Feed",
                    alias: "blog_news_feed",
                    url: "https://blog.example.com/api/posts",
                    authType: "noAuth",
                    username: "apiuser",
                    password: "apipass",
                    token: "abc123token456",
                    maxRetries: 3,
                    cache: true,
                    isInternal: true,
                    headers: [
                        {
                            name: "Authorization",
                            value: "Bearer xyz789",
                        },
                    ],
                    createdAt: "2025-09-17T16:03:25Z",
                    modifiedAt: "2025-09-17T16:03:25Z",
                },
                {
                    id: "d3e4f5a6-b7c8-49d0-91e2-f3a4b5c6d7e8",
                    name: "Public Data Feed",
                    alias: "public_data_feed",
                    url: "https://jsonplaceholder.typicode.com/posts",
                    authType: "noAuth",
                    username: "apiuser",
                    password: "apipass",
                    token: "abc123token456",
                    maxRetries: 3,
                    cache: true,
                    isInternal: true,
                    headers: [
                        {
                            name: "Authorization",
                            value: "Bearer xyz789",
                        },
                    ],
                    createdAt: "2025-09-05T09:06:42Z",
                    modifiedAt: "2025-09-05T09:06:42Z",
                },
            ],
        });
    });

    test("getAllExternalFeeds (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/feeds").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.externalFeeds.getAllExternalFeeds();
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getAllExternalFeeds (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/feeds").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.externalFeeds.getAllExternalFeeds();
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("createExternalFeed (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "Public API Feed",
            url: "https://jsonplaceholder.typicode.com/posts",
            authType: "noAuth",
            maxRetries: 3,
            cache: true,
        };
        const rawResponseBody = { id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6" };
        server
            .mockEndpoint()
            .post("/feeds")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.externalFeeds.createExternalFeed({
            name: "Public API Feed",
            url: "https://jsonplaceholder.typicode.com/posts",
            authType: "noAuth",
            maxRetries: 3,
            cache: true,
        });
        expect(response).toEqual({
            id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
    });

    test("createExternalFeed (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "Product Catalog",
            url: "https://api.example.com/products",
            authType: "noAuth",
            maxRetries: 3,
            cache: true,
        };
        const rawResponseBody = { id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6" };
        server
            .mockEndpoint()
            .post("/feeds")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.externalFeeds.createExternalFeed({
            name: "Product Catalog",
            url: "https://api.example.com/products",
            authType: "noAuth",
            maxRetries: 3,
            cache: true,
        });
        expect(response).toEqual({
            id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
    });

    test("createExternalFeed (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "Internal Blog Feed",
            url: "https://blog.example.com/api/posts",
            authType: "noAuth",
            maxRetries: 3,
            cache: true,
        };
        const rawResponseBody = { id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6" };
        server
            .mockEndpoint()
            .post("/feeds")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.externalFeeds.createExternalFeed({
            name: "Internal Blog Feed",
            url: "https://blog.example.com/api/posts",
            authType: "noAuth",
            maxRetries: 3,
            cache: true,
        });
        expect(response).toEqual({
            id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
    });

    test("createExternalFeed (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { name: "name", url: "url" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/feeds")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.externalFeeds.createExternalFeed({
                name: "name",
                url: "url",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getExternalFeedByUUID (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            name: "Product Catalog Feed",
            url: "https://api.example.com/products",
            authType: "noAuth",
            personalization: false,
            defaultAttr: "",
            defaultContact: "",
            maxRetries: 0,
            cache: false,
            createdAt: "2025-09-18T13:29:27Z",
            modifiedAt: "2025-09-18T13:29:27Z",
        };
        server
            .mockEndpoint()
            .get("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.externalFeeds.getExternalFeedByUuid({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
        expect(response).toEqual({
            id: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            name: "Product Catalog Feed",
            url: "https://api.example.com/products",
            authType: "noAuth",
            personalization: false,
            defaultAttr: "",
            defaultContact: "",
            maxRetries: 0,
            cache: false,
            createdAt: "2025-09-18T13:29:27Z",
            modifiedAt: "2025-09-18T13:29:27Z",
        });
    });

    test("getExternalFeedByUUID (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "c2d3e4f5-a6b7-48c9-90d1-e2f3a4b5c6d7",
            name: "Internal Blog Feed",
            url: "https://blog.example.com/api/posts",
            authType: "noAuth",
            personalization: false,
            defaultAttr: "",
            defaultContact: "",
            maxRetries: 0,
            cache: false,
            createdAt: "2025-09-17T16:03:25Z",
            modifiedAt: "2025-09-17T16:03:25Z",
        };
        server
            .mockEndpoint()
            .get("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.externalFeeds.getExternalFeedByUuid({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
        expect(response).toEqual({
            id: "c2d3e4f5-a6b7-48c9-90d1-e2f3a4b5c6d7",
            name: "Internal Blog Feed",
            url: "https://blog.example.com/api/posts",
            authType: "noAuth",
            personalization: false,
            defaultAttr: "",
            defaultContact: "",
            maxRetries: 0,
            cache: false,
            createdAt: "2025-09-17T16:03:25Z",
            modifiedAt: "2025-09-17T16:03:25Z",
        });
    });

    test("getExternalFeedByUUID (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "d3e4f5a6-b7c8-49d0-91e2-f3a4b5c6d7e8",
            name: "Public Data Feed",
            url: "https://jsonplaceholder.typicode.com/posts",
            authType: "noAuth",
            personalization: false,
            defaultAttr: "",
            defaultContact: "",
            maxRetries: 0,
            cache: false,
            createdAt: "2025-09-05T09:06:42Z",
            modifiedAt: "2025-09-05T09:06:42Z",
        };
        server
            .mockEndpoint()
            .get("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.externalFeeds.getExternalFeedByUuid({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
        expect(response).toEqual({
            id: "d3e4f5a6-b7c8-49d0-91e2-f3a4b5c6d7e8",
            name: "Public Data Feed",
            url: "https://jsonplaceholder.typicode.com/posts",
            authType: "noAuth",
            personalization: false,
            defaultAttr: "",
            defaultContact: "",
            maxRetries: 0,
            cache: false,
            createdAt: "2025-09-05T09:06:42Z",
            modifiedAt: "2025-09-05T09:06:42Z",
        });
    });

    test("getExternalFeedByUUID (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/feeds/uuid").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.externalFeeds.getExternalFeedByUuid({
                uuid: "uuid",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getExternalFeedByUUID (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/feeds/uuid").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.externalFeeds.getExternalFeedByUuid({
                uuid: "uuid",
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("updateExternalFeed (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { name: "Updated Product Catalog", url: "https://api.newstore.com/products/v2" };

        server
            .mockEndpoint()
            .put("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.externalFeeds.updateExternalFeed({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            name: "Updated Product Catalog",
            url: "https://api.newstore.com/products/v2",
        });
        expect(response).toEqual(undefined);
    });

    test("updateExternalFeed (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { authType: "token", token: "newabc123token789" };

        server
            .mockEndpoint()
            .put("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.externalFeeds.updateExternalFeed({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            authType: "token",
            token: "newabc123token789",
        });
        expect(response).toEqual(undefined);
    });

    test("updateExternalFeed (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { maxRetries: 5, cache: true };

        server
            .mockEndpoint()
            .put("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.externalFeeds.updateExternalFeed({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            maxRetries: 5,
            cache: true,
        });
        expect(response).toEqual(undefined);
    });

    test("updateExternalFeed (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            headers: [
                { name: "X-API-Version", value: "v2" },
                { name: "User-Agent", value: "Brevo-Feed-Client/1.0" },
            ],
        };

        server
            .mockEndpoint()
            .put("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.externalFeeds.updateExternalFeed({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            headers: [
                {
                    name: "X-API-Version",
                    value: "v2",
                },
                {
                    name: "User-Agent",
                    value: "Brevo-Feed-Client/1.0",
                },
            ],
        });
        expect(response).toEqual(undefined);
    });

    test("updateExternalFeed (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "Enterprise Product Feed",
            url: "https://enterprise-api.company.com/catalog",
            authType: "token",
            token: "enterprise789token123",
            headers: [
                { name: "Authorization", value: "Bearer enterprise789token123" },
                { name: "Accept", value: "application/json" },
            ],
            maxRetries: 3,
            cache: true,
        };

        server
            .mockEndpoint()
            .put("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.externalFeeds.updateExternalFeed({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
            name: "Enterprise Product Feed",
            url: "https://enterprise-api.company.com/catalog",
            authType: "token",
            token: "enterprise789token123",
            headers: [
                {
                    name: "Authorization",
                    value: "Bearer enterprise789token123",
                },
                {
                    name: "Accept",
                    value: "application/json",
                },
            ],
            maxRetries: 3,
            cache: true,
        });
        expect(response).toEqual(undefined);
    });

    test("updateExternalFeed (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/feeds/uuid")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.externalFeeds.updateExternalFeed({
                uuid: "uuid",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateExternalFeed (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/feeds/uuid")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.externalFeeds.updateExternalFeed({
                uuid: "uuid",
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("deleteExternalFeed (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server
            .mockEndpoint()
            .delete("/feeds/b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.externalFeeds.deleteExternalFeed({
            uuid: "b1c2d3e4-f5a6-47b8-89c0-d1e2f3a4b5c6",
        });
        expect(response).toEqual(undefined);
    });

    test("deleteExternalFeed (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().delete("/feeds/uuid").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.externalFeeds.deleteExternalFeed({
                uuid: "uuid",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteExternalFeed (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().delete("/feeds/uuid").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.externalFeeds.deleteExternalFeed({
                uuid: "uuid",
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });
});
