// This file was auto-generated by Fern from our API Definition.

import * as BrevoApi from "../../src/api/index";
import { BrevoApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("CustomObjectsClient", () => {
    test("upsertrecords (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { records: [{}] };
        const rawResponseBody = { message: "Batch object records are being processed", processId: 21 };
        server
            .mockEndpoint()
            .post("/objects/vehicle/batch/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.customObjects.upsertrecords({
            object_type: "vehicle",
            records: [{}],
        });
        expect(response).toEqual({
            message: "Batch object records are being processed",
            processId: 21,
        });
    });

    test("upsertrecords (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { records: [{}, {}] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.upsertrecords({
                object_type: "object_type",
                records: [{}, {}],
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("upsertrecords (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { records: [{}, {}] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.upsertrecords({
                object_type: "object_type",
                records: [{}, {}],
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("upsertrecords (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { records: [{}, {}] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.upsertrecords({
                object_type: "object_type",
                records: [{}, {}],
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("upsertrecords (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { records: [{}, {}] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.upsertrecords({
                object_type: "object_type",
                records: [{}, {}],
            });
        }).rejects.toThrow(BrevoApi.InternalServerError);
    });

    test("getrecords (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            count: 350,
            records: [
                {
                    associations: [{ object_type: "garage", records: [{ identifiers: { id: 12345 } }] }],
                    attributes: { color: "Black", engine_type: "Hybrid", make: "Toyoto", model: "Corolla", year: 2020 },
                    createdAt: "2025-07-22T10:20:30Z",
                    identifiers: { ext_id: "507f1f77bc", id: 16789 },
                    updatedAt: "2025-07-22T10:20:30Z",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/objects/vehicle/records")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.customObjects.getrecords({
            object_type: "vehicle",
            limit: 1000000,
            page_num: 1000000,
        });
        expect(response).toEqual({
            count: 350,
            records: [
                {
                    associations: [
                        {
                            object_type: "garage",
                            records: [
                                {
                                    identifiers: {
                                        id: 12345,
                                    },
                                },
                            ],
                        },
                    ],
                    attributes: {
                        color: "Black",
                        engine_type: "Hybrid",
                        make: "Toyoto",
                        model: "Corolla",
                        year: 2020,
                    },
                    createdAt: "2025-07-22T10:20:30Z",
                    identifiers: {
                        ext_id: "507f1f77bc",
                        id: 16789,
                    },
                    updatedAt: "2025-07-22T10:20:30Z",
                },
            ],
        });
    });

    test("getrecords (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/objects/object_type/records")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.getrecords({
                object_type: "object_type",
                limit: 1000000,
                page_num: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getrecords (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/objects/object_type/records")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.getrecords({
                object_type: "object_type",
                limit: 1000000,
                page_num: 1000000,
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("getrecords (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/objects/object_type/records")
            .respondWith()
            .statusCode(424)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.getrecords({
                object_type: "object_type",
                limit: 1000000,
                page_num: 1000000,
            });
        }).rejects.toThrow(BrevoApi.FailedDependencyError);
    });

    test("getrecords (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/objects/object_type/records")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.getrecords({
                object_type: "object_type",
                limit: 1000000,
                page_num: 1000000,
            });
        }).rejects.toThrow(BrevoApi.InternalServerError);
    });

    test("batchDeleteObjectRecords (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { identifiers: { ext_ids: ["ext-001", "ext-002"] } };
        const rawResponseBody = { processId: 21, message: "Batch object records are being processed for deletion." };
        server
            .mockEndpoint()
            .post("/objects/vehicle/batch/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.customObjects.batchDeleteObjectRecords({
            object_type: "vehicle",
            identifiers: {
                ext_ids: ["ext-001", "ext-002"],
            },
        });
        expect(response).toEqual({
            processId: 21,
            message: "Batch object records are being processed for deletion.",
        });
    });

    test("batchDeleteObjectRecords (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.batchDeleteObjectRecords({
                object_type: "object_type",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("batchDeleteObjectRecords (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.batchDeleteObjectRecords({
                object_type: "object_type",
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("batchDeleteObjectRecords (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.batchDeleteObjectRecords({
                object_type: "object_type",
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("batchDeleteObjectRecords (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/objects/object_type/batch/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.customObjects.batchDeleteObjectRecords({
                object_type: "object_type",
            });
        }).rejects.toThrow(BrevoApi.InternalServerError);
    });
});
