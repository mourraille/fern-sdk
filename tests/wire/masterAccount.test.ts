// This file was auto-generated by Fern from our API Definition.

import * as BrevoApi from "../../src/api/index";
import { BrevoApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("MasterAccountClient", () => {
    test("createANewGroupOfSubAccounts (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { groupName: "My group" };
        const rawResponseBody = { id: "659xxxxxxxxxxxxxxxx6ef9c8" };
        server
            .mockEndpoint()
            .post("/corporate/group")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.createANewGroupOfSubAccounts({
            groupName: "My group",
        });
        expect(response).toEqual({
            id: "659xxxxxxxxxxxxxxxx6ef9c8",
        });
    });

    test("createANewGroupOfSubAccounts (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { groupName: "groupName" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/group")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.createANewGroupOfSubAccounts({
                groupName: "groupName",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteSubAccountFromGroup (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { subAccountIds: [423432, 234323, 87678] };

        server
            .mockEndpoint()
            .put("/corporate/group/unlink/groupId/subAccounts")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.masterAccount.deleteSubAccountFromGroup({
            groupId: "groupId",
            subAccountIds: [423432, 234323, 87678],
        });
        expect(response).toEqual(undefined);
    });

    test("deleteSubAccountFromGroup (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { subAccountIds: [1000000, 1000000] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/group/unlink/groupId/subAccounts")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.deleteSubAccountFromGroup({
                groupId: "groupId",
                subAccountIds: [1000000, 1000000],
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getAGroupDetails", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            group: { createdAt: "2024-02-09T06:14:40+00:00", groupName: "My group", id: "5f926dba72a405440a4efc97" },
            "sub-accounts": [
                { companyName: "My sub organization", createdAt: "2024-02-09T06:14:40+00:00", id: 7866556 },
                { companyName: "Your sub organization", createdAt: "2024-01-05T03:11:40+00:00", id: 6563051 },
            ],
            users: [
                { email: "my-user@my-org.com", firstName: "John", lastName: "Smith" },
                { email: "your-user@your-org.com", firstName: "firstName", lastName: "lastName" },
            ],
        };
        server
            .mockEndpoint()
            .get("/corporate/group/id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.getAGroupDetails({
            id: "id",
        });
        expect(response).toEqual({
            group: {
                createdAt: "2024-02-09T06:14:40+00:00",
                groupName: "My group",
                id: "5f926dba72a405440a4efc97",
            },
            "sub-accounts": [
                {
                    companyName: "My sub organization",
                    createdAt: "2024-02-09T06:14:40+00:00",
                    id: 7866556,
                },
                {
                    companyName: "Your sub organization",
                    createdAt: "2024-01-05T03:11:40+00:00",
                    id: 6563051,
                },
            ],
            users: [
                {
                    email: "my-user@my-org.com",
                    firstName: "John",
                    lastName: "Smith",
                },
                {
                    email: "your-user@your-org.com",
                    firstName: "firstName",
                    lastName: "lastName",
                },
            ],
        });
    });

    test("updateAGroupOfSubAccounts (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server.mockEndpoint().put("/corporate/group/id").jsonBody(rawRequestBody).respondWith().statusCode(200).build();

        const response = await client.masterAccount.updateAGroupOfSubAccounts({
            id: "id",
        });
        expect(response).toEqual(undefined);
    });

    test("updateAGroupOfSubAccounts (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/group/id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.updateAGroupOfSubAccounts({
                id: "id",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteAGroup (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().delete("/corporate/group/id").respondWith().statusCode(200).build();

        const response = await client.masterAccount.deleteAGroup({
            id: "id",
        });
        expect(response).toEqual(undefined);
    });

    test("deleteAGroup (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/corporate/group/id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.deleteAGroup({
                id: "id",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getSubAccountGroups", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = [
            { groupName: "My group 1", id: "d3b142c709d6ed67ef1cd903" },
            { groupName: "My group 2", id: "a5b192a709d6ed67ef8fd922" },
            { groupName: "My group 3", id: "bbb142c709d6ed67ef1cd910" },
        ];
        server.mockEndpoint().get("/corporate/groups").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.masterAccount.getSubAccountGroups();
        expect(response).toEqual([
            {
                groupName: "My group 1",
                id: "d3b142c709d6ed67ef1cd903",
            },
            {
                groupName: "My group 2",
                id: "a5b192a709d6ed67ef8fd922",
            },
            {
                groupName: "My group 3",
                id: "bbb142c709d6ed67ef1cd910",
            },
        ]);
    });

    test("getCorporateInvitedUsersList", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            users: [
                {
                    email: "master-user2@company.com",
                    feature_access: {
                        analytics: ["download_data", "create_alerts", "my_looks", "explore_create"],
                        api_keys: ["all"],
                        apps_management: ["none"],
                        create_sub_organizations: ["all"],
                        manage_sub_organizations: ["all"],
                        my_plan: ["all", "all"],
                        sub_organization_groups: ["create", "edit_delete"],
                        user_management: ["none"],
                    },
                    groups: { id: "a5c4f22c08d9ed37ef1ca342", name: "My group" },
                    is_owner: "is_owner",
                    status: "active",
                },
                {
                    email: "master-user3@company.com",
                    feature_access: {
                        analytics: ["create_alerts", "my_looks"],
                        api_keys: ["none"],
                        apps_management: ["all"],
                        create_sub_organizations: ["all"],
                        manage_sub_organizations: ["all"],
                        my_plan: ["none", "none"],
                        sub_organization_groups: ["edit_delete"],
                        user_management: ["all"],
                    },
                    groups: { id: "a5c4f22c08d9ed37ef1ca342", name: "My group" },
                    is_owner: "is_owner",
                    status: "active",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/corporate/invited/users")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.getCorporateInvitedUsersList();
        expect(response).toEqual({
            users: [
                {
                    email: "master-user2@company.com",
                    feature_access: {
                        analytics: ["download_data", "create_alerts", "my_looks", "explore_create"],
                        api_keys: ["all"],
                        apps_management: ["none"],
                        create_sub_organizations: ["all"],
                        manage_sub_organizations: ["all"],
                        my_plan: ["all", "all"],
                        sub_organization_groups: ["create", "edit_delete"],
                        user_management: ["none"],
                    },
                    groups: {
                        id: "a5c4f22c08d9ed37ef1ca342",
                        name: "My group",
                    },
                    is_owner: "is_owner",
                    status: "active",
                },
                {
                    email: "master-user3@company.com",
                    feature_access: {
                        analytics: ["create_alerts", "my_looks"],
                        api_keys: ["none"],
                        apps_management: ["all"],
                        create_sub_organizations: ["all"],
                        manage_sub_organizations: ["all"],
                        my_plan: ["none", "none"],
                        sub_organization_groups: ["edit_delete"],
                        user_management: ["all"],
                    },
                    groups: {
                        id: "a5c4f22c08d9ed37ef1ca342",
                        name: "My group",
                    },
                    is_owner: "is_owner",
                    status: "active",
                },
            ],
        });
    });

    test("listOfAllIPs", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = [
            { domain: "example.com", ip: "192.168.1.1", transactional: true },
            { domain: "example.com", ip: "192.168.1.2", transactional: false },
        ];
        server.mockEndpoint().get("/corporate/ip").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.masterAccount.listOfAllIPs();
        expect(response).toEqual([
            {
                domain: "example.com",
                ip: "192.168.1.1",
                transactional: true,
            },
            {
                domain: "example.com",
                ip: "192.168.1.2",
                transactional: false,
            },
        ]);
    });

    test("getTheDetailsOfRequestedMasterAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            billingInfo: {
                address: {
                    countryCode: "IN",
                    locality: "Pandav Nagar, New Delhi",
                    postalCode: "560048",
                    stateCode: "UP",
                    streetAddress: "C-92",
                },
                companyName: "Corp Sample 1-1",
                email: "sample@example.com",
                name: { familyName: "Pandit", givenName: "Uday" },
            },
            companyName: "Corp Sample 1-1",
            currencyCode: "INR",
            email: "sample@example.com",
            id: 1003286,
            planInfo: {
                currencyCode: "INR",
                features: [
                    { name: "MULTI_USER", quantity: 10, remaining: 0, unitValue: "unitValue", used: 15 },
                    { name: "ADVANCED_REPORTING", quantity: 12, remaining: 11, unitValue: "unitValue", used: 1 },
                    { name: "INBOX", quantity: 10, remaining: 0, unitValue: "unitValue", used: 10 },
                    { name: "LANDING_PAGE", quantity: 10, remaining: 0, unitValue: "unitValue", used: 11 },
                    { name: "RECURRING_CREDITS", quantity: 500, remaining: 499, unitValue: "unitValue", used: 1 },
                ],
                nextBillingAt: 1637739295,
                planPeriod: "month",
                price: 2100,
                subAccounts: 15,
            },
            timezone: "Europe/Paris",
        };
        server
            .mockEndpoint()
            .get("/corporate/masterAccount")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.getTheDetailsOfRequestedMasterAccount();
        expect(response).toEqual({
            billingInfo: {
                address: {
                    countryCode: "IN",
                    locality: "Pandav Nagar, New Delhi",
                    postalCode: "560048",
                    stateCode: "UP",
                    streetAddress: "C-92",
                },
                companyName: "Corp Sample 1-1",
                email: "sample@example.com",
                name: {
                    familyName: "Pandit",
                    givenName: "Uday",
                },
            },
            companyName: "Corp Sample 1-1",
            currencyCode: "INR",
            email: "sample@example.com",
            id: 1003286,
            planInfo: {
                currencyCode: "INR",
                features: [
                    {
                        name: "MULTI_USER",
                        quantity: 10,
                        remaining: 0,
                        unitValue: "unitValue",
                        used: 15,
                    },
                    {
                        name: "ADVANCED_REPORTING",
                        quantity: 12,
                        remaining: 11,
                        unitValue: "unitValue",
                        used: 1,
                    },
                    {
                        name: "INBOX",
                        quantity: 10,
                        remaining: 0,
                        unitValue: "unitValue",
                        used: 10,
                    },
                    {
                        name: "LANDING_PAGE",
                        quantity: 10,
                        remaining: 0,
                        unitValue: "unitValue",
                        used: 11,
                    },
                    {
                        name: "RECURRING_CREDITS",
                        quantity: 500,
                        remaining: 499,
                        unitValue: "unitValue",
                        used: 1,
                    },
                ],
                nextBillingAt: 1637739295,
                planPeriod: "month",
                price: 2100,
                subAccounts: 15,
            },
            timezone: "Europe/Paris",
        });
    });

    test("getTheDetailsOfRequestedMasterAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/corporate/masterAccount")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.getTheDetailsOfRequestedMasterAccount();
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("generateSsoTokenToAccessAdminAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: "vipin+ent-user@brevo.com" };
        const rawResponseBody = { token: "5cadaxxxxxxxxxxxxxxxxxxxx5a179f85a0" };
        server
            .mockEndpoint()
            .post("/corporate/ssoToken")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.generateSsoTokenToAccessAdminAccount({
            email: "vipin+ent-user@brevo.com",
        });
        expect(response).toEqual({
            token: "5cadaxxxxxxxxxxxxxxxxxxxx5a179f85a0",
        });
    });

    test("generateSsoTokenToAccessAdminAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/ssoToken")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.generateSsoTokenToAccessAdminAccount({
                email: "email",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("generateSsoTokenToAccessAdminAccount (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/ssoToken")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.generateSsoTokenToAccessAdminAccount({
                email: "email",
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("getTheListOfAllTheSubAccountsOfTheMasterAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            count: 3,
            subAccounts: [
                {
                    active: true,
                    companyName: "Company1",
                    createdAt: 1631523176,
                    groups: [
                        { id: "5f8f8c3b5f56a02d4433b3a8", name: "Group 1" },
                        { id: "4fbf3c3b1f56a02ac465b1a0", name: "Group 2" },
                    ],
                    id: 4043629,
                },
                { active: true, companyName: "Company2", createdAt: 1629439311, groups: [{}], id: 3984002 },
                { active: true, companyName: "Company3", createdAt: 1614713641, groups: [{}], id: 3524191 },
            ],
        };
        server
            .mockEndpoint()
            .get("/corporate/subAccount")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.getTheListOfAllTheSubAccountsOfTheMasterAccount({
            offset: 1,
            limit: 1,
        });
        expect(response).toEqual({
            count: 3,
            subAccounts: [
                {
                    active: true,
                    companyName: "Company1",
                    createdAt: 1631523176,
                    groups: [
                        {
                            id: "5f8f8c3b5f56a02d4433b3a8",
                            name: "Group 1",
                        },
                        {
                            id: "4fbf3c3b1f56a02ac465b1a0",
                            name: "Group 2",
                        },
                    ],
                    id: 4043629,
                },
                {
                    active: true,
                    companyName: "Company2",
                    createdAt: 1629439311,
                    groups: [{}],
                    id: 3984002,
                },
                {
                    active: true,
                    companyName: "Company3",
                    createdAt: 1614713641,
                    groups: [{}],
                    id: 3524191,
                },
            ],
        });
    });

    test("getTheListOfAllTheSubAccountsOfTheMasterAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/corporate/subAccount")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.getTheListOfAllTheSubAccountsOfTheMasterAccount({
                offset: 1,
                limit: 1,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("createANewSubAccountUnderAMasterAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            companyName: "Test Sub-account",
            email: "test-sub@example.com",
            groupIds: ["5f8f8c3b5f56a02d4433b3a7", "5f8f8c3b5f56a02d4433b3a8"],
            language: "fr",
            timezone: "Europe/Paris",
        };
        const rawResponseBody = { id: 4109344 };
        server
            .mockEndpoint()
            .post("/corporate/subAccount")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.createANewSubAccountUnderAMasterAccount({
            companyName: "Test Sub-account",
            email: "test-sub@example.com",
            groupIds: ["5f8f8c3b5f56a02d4433b3a7", "5f8f8c3b5f56a02d4433b3a8"],
            language: "fr",
            timezone: "Europe/Paris",
        });
        expect(response).toEqual({
            id: 4109344,
        });
    });

    test("createANewSubAccountUnderAMasterAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { companyName: "companyName", email: "email" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.createANewSubAccountUnderAMasterAccount({
                companyName: "companyName",
                email: "email",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("associateAnIpToSubAccounts (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { ids: [234322, 325553, 893432], ip: "103.11.32.88" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/ip/associate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.associateAnIpToSubAccounts({
            ids: [234322, 325553, 893432],
            ip: "103.11.32.88",
        });
        expect(response).toEqual({
            key: "value",
        });
    });

    test("associateAnIpToSubAccounts (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { ids: [1000000, 1000000], ip: "ip" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/ip/associate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.associateAnIpToSubAccounts({
                ids: [1000000, 1000000],
                ip: "ip",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("dissociateAnIpToSubAccounts (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { ids: [234322, 325553, 893432], ip: "103.11.32.88" };

        server
            .mockEndpoint()
            .put("/corporate/subAccount/ip/dissociate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.masterAccount.dissociateAnIpToSubAccounts({
            ids: [234322, 325553, 893432],
            ip: "103.11.32.88",
        });
        expect(response).toEqual(undefined);
    });

    test("dissociateAnIpToSubAccounts (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { ids: [1000000, 1000000], ip: "ip" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccount/ip/dissociate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.dissociateAnIpToSubAccounts({
                ids: [1000000, 1000000],
                ip: "ip",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("createAnApiKeyForASubAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { id: 3232323, name: "My Api Key" };
        const rawResponseBody = { key: "xkeysib-21881axxxxxcc92e04-mIrexxxx7z", status: "success" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/key")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.createAnApiKeyForASubAccount({
            id: 3232323,
            name: "My Api Key",
        });
        expect(response).toEqual({
            key: "xkeysib-21881axxxxxcc92e04-mIrexxxx7z",
            status: "success",
        });
    });

    test("createAnApiKeyForASubAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { id: 1000000, name: "name" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/key")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.createAnApiKeyForASubAccount({
                id: 1000000,
                name: "name",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("generateSsoTokenToAccessSubAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { id: 3232323 };
        const rawResponseBody = { token: "5cadaxxxxxxxxxxxxxxxxxxxx5a179f85a0" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/ssoToken")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.generateSsoTokenToAccessSubAccount({
            id: 3232323,
        });
        expect(response).toEqual({
            token: "5cadaxxxxxxxxxxxxxxxxxxxx5a179f85a0",
        });
    });

    test("generateSsoTokenToAccessSubAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { id: 1000000 };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/ssoToken")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.generateSsoTokenToAccessSubAccount({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("generateSsoTokenToAccessSubAccount (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { id: 1000000 };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/subAccount/ssoToken")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.generateSsoTokenToAccessSubAccount({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("getSubAccountDetails (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            companyName: "API-Sub-26thOct21-4",
            email: "uday+1@brevo.com",
            groups: [
                { id: "5f8f8c3b5f56a02d4433b3a7", name: "Group 1" },
                { id: "5f8f8c3b5f56a02d4433b3a8", name: "Group 2" },
            ],
            name: "Uday Pandit",
            planInfo: {
                credits: {
                    emails: { quantity: 2000, remaining: 1955 },
                    externalFeeds: { quantity: 1, remaining: 1 },
                    sms: { quantity: 2000, remaining: 1955 },
                    whatsapp: { quantity: 100, remaining: 50 },
                    wpSubscribers: { quantity: 2000, remaining: 1955 },
                },
                features: {
                    inbox: { quantity: 20, remaining: 12 },
                    landingPage: { quantity: 25, remaining: 14 },
                    salesUsers: { quantity: 30, remaining: 14 },
                    users: { quantity: 30, remaining: 14 },
                },
                planType: "paid",
            },
        };
        server
            .mockEndpoint()
            .get("/corporate/subAccount/1000000")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.getSubAccountDetails({
            id: 1000000,
        });
        expect(response).toEqual({
            companyName: "API-Sub-26thOct21-4",
            email: "uday+1@brevo.com",
            groups: [
                {
                    id: "5f8f8c3b5f56a02d4433b3a7",
                    name: "Group 1",
                },
                {
                    id: "5f8f8c3b5f56a02d4433b3a8",
                    name: "Group 2",
                },
            ],
            name: "Uday Pandit",
            planInfo: {
                credits: {
                    emails: {
                        quantity: 2000,
                        remaining: 1955,
                    },
                    externalFeeds: {
                        quantity: 1,
                        remaining: 1,
                    },
                    sms: {
                        quantity: 2000,
                        remaining: 1955,
                    },
                    whatsapp: {
                        quantity: 100,
                        remaining: 50,
                    },
                    wpSubscribers: {
                        quantity: 2000,
                        remaining: 1955,
                    },
                },
                features: {
                    inbox: {
                        quantity: 20,
                        remaining: 12,
                    },
                    landingPage: {
                        quantity: 25,
                        remaining: 14,
                    },
                    salesUsers: {
                        quantity: 30,
                        remaining: 14,
                    },
                    users: {
                        quantity: 30,
                        remaining: 14,
                    },
                },
                planType: "paid",
            },
        });
    });

    test("getSubAccountDetails (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/corporate/subAccount/1000000")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.getSubAccountDetails({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteASubAccount (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().delete("/corporate/subAccount/1000000").respondWith().statusCode(200).build();

        const response = await client.masterAccount.deleteASubAccount({
            id: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("deleteASubAccount (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/corporate/subAccount/1000000")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.deleteASubAccount({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteASubAccount (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/corporate/subAccount/1000000")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.deleteASubAccount({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("enableDisableSubAccountApplicationS (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            "landing-pages": true,
            meetings: true,
            "sms-campaigns": false,
            "web-push": false,
            whatsapp: true,
        };

        server
            .mockEndpoint()
            .put("/corporate/subAccount/1000000/applications/toggle")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.masterAccount.enableDisableSubAccountApplicationS({
            id: 1000000,
            "landing-pages": true,
            meetings: true,
            "sms-campaigns": false,
            "web-push": false,
            whatsapp: true,
        });
        expect(response).toEqual(undefined);
    });

    test("enableDisableSubAccountApplicationS (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccount/1000000/applications/toggle")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.enableDisableSubAccountApplicationS({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("enableDisableSubAccountApplicationS (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccount/1000000/applications/toggle")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.enableDisableSubAccountApplicationS({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("updateSubAccountPlan (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            credits: { email: 5000, externalFeeds: 1, sms: 2000, whatsapp: 100, wpSubscribers: -1 },
            features: { inbox: 10, landingPage: 20, salesUsers: 6, users: 15 },
        };

        server
            .mockEndpoint()
            .put("/corporate/subAccount/1000000/plan")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.masterAccount.updateSubAccountPlan({
            id: 1000000,
            credits: {
                email: 5000,
                externalFeeds: 1,
                sms: 2000,
                whatsapp: 100,
                wpSubscribers: -1,
            },
            features: {
                inbox: 10,
                landingPage: 20,
                salesUsers: 6,
                users: 15,
            },
        });
        expect(response).toEqual(undefined);
    });

    test("updateSubAccountPlan (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccount/1000000/plan")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.updateSubAccountPlan({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateSubAccountPlan (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccount/1000000/plan")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.updateSubAccountPlan({
                id: 1000000,
            });
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("updateSubAccountsPlan (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            credits: { email: 5000, externalFeeds: 1, sms: 2000, whatsapp: 100, wpSubscribers: -1 },
            features: { landingPage: 20, salesUsers: 6, users: 15 },
            subAccountIds: [4534345, 987893, 876785],
        };

        server
            .mockEndpoint()
            .put("/corporate/subAccounts/plan")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.masterAccount.updateSubAccountsPlan({
            credits: {
                email: 5000,
                externalFeeds: 1,
                sms: 2000,
                whatsapp: 100,
                wpSubscribers: -1,
            },
            features: {
                landingPage: 20,
                salesUsers: 6,
                users: 15,
            },
            subAccountIds: [4534345, 987893, 876785],
        });
        expect(response).toEqual(undefined);
    });

    test("updateSubAccountsPlan (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccounts/plan")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.updateSubAccountsPlan();
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateSubAccountsPlan (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/subAccounts/plan")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.updateSubAccountsPlan();
        }).rejects.toThrow(BrevoApi.ForbiddenError);
    });

    test("inviteAdminUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { all_features_access: true, email: "inviteuser@example.com", privileges: [{}] };
        const rawResponseBody = { id: "659xxxxxxxxxxxxxxxx6ef9c8" };
        server
            .mockEndpoint()
            .post("/corporate/user/invitation/send")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.inviteAdminUser({
            all_features_access: true,
            email: "inviteuser@example.com",
            privileges: [{}],
        });
        expect(response).toEqual({
            id: "659xxxxxxxxxxxxxxxx6ef9c8",
        });
    });

    test("inviteAdminUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { all_features_access: true, email: "email", privileges: [{}, {}] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/corporate/user/invitation/send")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.inviteAdminUser({
                all_features_access: true,
                email: "email",
                privileges: [{}, {}],
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("resendCancelAdminUserInvitation (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { message: "Invitation resent successfully" };
        server
            .mockEndpoint()
            .put("/corporate/user/invitation/resend/email")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.resendCancelAdminUserInvitation({
            action: "resend",
            email: "email",
        });
        expect(response).toEqual({
            message: "Invitation resent successfully",
        });
    });

    test("resendCancelAdminUserInvitation (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/user/invitation/resend/email")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.resendCancelAdminUserInvitation({
                action: "resend",
                email: "email",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("revokeAnAdminUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().delete("/corporate/user/revoke/email").respondWith().statusCode(200).build();

        const response = await client.masterAccount.revokeAnAdminUser({
            email: "email",
        });
        expect(response).toEqual(undefined);
    });

    test("revokeAnAdminUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/corporate/user/revoke/email")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.revokeAnAdminUser({
                email: "email",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getCorporateUserPermission (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            email: "invitedUser@company.com",
            feature_access: {
                analytics: ["download_data", "create_alerts", "my_looks", "explore_create"],
                api_keys: ["all"],
                apps_management: ["all"],
                create_sub_organizations: ["all"],
                manage_sub_organizations: ["all"],
                my_plan: ["all", "all"],
                sub_organization_groups: ["create", "edit_delete"],
                user_management: ["none"],
            },
            groups: [
                { id: "6543ab3667ffbb00142e4486", name: "Support" },
                { id: "174bab366732bbce142e4412", name: "Technical" },
            ],
            status: "active",
        };
        server
            .mockEndpoint()
            .get("/corporate/user/email/permissions")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.masterAccount.getCorporateUserPermission({
            email: "email",
        });
        expect(response).toEqual({
            email: "invitedUser@company.com",
            feature_access: {
                analytics: ["download_data", "create_alerts", "my_looks", "explore_create"],
                api_keys: ["all"],
                apps_management: ["all"],
                create_sub_organizations: ["all"],
                manage_sub_organizations: ["all"],
                my_plan: ["all", "all"],
                sub_organization_groups: ["create", "edit_delete"],
                user_management: ["none"],
            },
            groups: [
                {
                    id: "6543ab3667ffbb00142e4486",
                    name: "Support",
                },
                {
                    id: "174bab366732bbce142e4412",
                    name: "Technical",
                },
            ],
            status: "active",
        });
    });

    test("getCorporateUserPermission (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/corporate/user/email/permissions")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.getCorporateUserPermission({
                email: "email",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("changeAdminUserPermissions (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            all_features_access: false,
            privileges: [
                { feature: "user_management", permissions: ["all"] },
                { feature: "api", permissions: ["all"] },
                { feature: "my_plan", permissions: ["none"] },
                { feature: "apps_management", permissions: ["all"] },
                { feature: "create_sub_organizations", permissions: ["all"] },
                { feature: "sub_organization_groups", permissions: ["create", "edit_delete"] },
                { feature: "manage_sub_organizations", permissions: ["all"] },
                { feature: "security", permissions: ["none"] },
                { feature: "analytics", permissions: ["create_alerts", "download_data", "my_looks", "explore_create"] },
            ],
        };

        server
            .mockEndpoint()
            .put("/corporate/user/email/permissions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.masterAccount.changeAdminUserPermissions({
            email: "email",
            all_features_access: false,
            privileges: [
                {
                    feature: "user_management",
                    permissions: ["all"],
                },
                {
                    feature: "api",
                    permissions: ["all"],
                },
                {
                    feature: "my_plan",
                    permissions: ["none"],
                },
                {
                    feature: "apps_management",
                    permissions: ["all"],
                },
                {
                    feature: "create_sub_organizations",
                    permissions: ["all"],
                },
                {
                    feature: "sub_organization_groups",
                    permissions: ["create", "edit_delete"],
                },
                {
                    feature: "manage_sub_organizations",
                    permissions: ["all"],
                },
                {
                    feature: "security",
                    permissions: ["none"],
                },
                {
                    feature: "analytics",
                    permissions: ["create_alerts", "download_data", "my_looks", "explore_create"],
                },
            ],
        });
        expect(response).toEqual(undefined);
    });

    test("changeAdminUserPermissions (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { all_features_access: true, privileges: [{}, {}] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/corporate/user/email/permissions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.masterAccount.changeAdminUserPermissions({
                email: "email",
                all_features_access: true,
                privileges: [{}, {}],
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });
});
