// This file was auto-generated by Fern from our API Definition.

import * as BrevoApi from "../../src/api/index";
import { BrevoApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("SmsCampaignsClient", () => {
    test("getSmsCampaigns (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            campaigns: [
                {
                    content: "Visit our Store and get some discount !",
                    createdAt: "2017-06-01T12:30:00Z",
                    id: 2,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    name: "PROMO CODE",
                    scheduledAt: "2017-06-01T12:30:00Z",
                    sender: "MyCompany",
                    status: "sent",
                    recipients: { exclusionLists: [13], lists: [21] },
                    statistics: {
                        answered: 2,
                        delivered: 2987,
                        hardBounces: 1,
                        processing: 0,
                        sent: 3000,
                        softBounces: 3,
                        unsubscriptions: 3,
                    },
                },
                {
                    content: "Summer Sale is starting tomorrow. Get extra 10% with this code:SUM17",
                    createdAt: "2017-06-01T12:30:00Z",
                    id: 10,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    name: "SUMMER SALE",
                    scheduledAt: "2017-08-04T12:30:00Z",
                    sender: "MyCompany",
                    status: "draft",
                    recipients: { exclusionLists: [13], lists: [21] },
                    statistics: {
                        answered: 2,
                        delivered: 2987,
                        hardBounces: 1,
                        processing: 0,
                        sent: 3000,
                        softBounces: 3,
                        unsubscriptions: 3,
                    },
                },
            ],
            count: 12,
        };
        server.mockEndpoint().get("/smsCampaigns").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.smsCampaigns.getSmsCampaigns();
        expect(response).toEqual({
            campaigns: [
                {
                    content: "Visit our Store and get some discount !",
                    createdAt: "2017-06-01T12:30:00Z",
                    id: 2,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    name: "PROMO CODE",
                    scheduledAt: "2017-06-01T12:30:00Z",
                    sender: "MyCompany",
                    status: "sent",
                    recipients: {
                        exclusionLists: [13],
                        lists: [21],
                    },
                    statistics: {
                        answered: 2,
                        delivered: 2987,
                        hardBounces: 1,
                        processing: 0,
                        sent: 3000,
                        softBounces: 3,
                        unsubscriptions: 3,
                    },
                },
                {
                    content: "Summer Sale is starting tomorrow. Get extra 10% with this code:SUM17",
                    createdAt: "2017-06-01T12:30:00Z",
                    id: 10,
                    modifiedAt: "2017-05-01T12:30:00Z",
                    name: "SUMMER SALE",
                    scheduledAt: "2017-08-04T12:30:00Z",
                    sender: "MyCompany",
                    status: "draft",
                    recipients: {
                        exclusionLists: [13],
                        lists: [21],
                    },
                    statistics: {
                        answered: 2,
                        delivered: 2987,
                        hardBounces: 1,
                        processing: 0,
                        sent: 3000,
                        softBounces: 3,
                        unsubscriptions: 3,
                    },
                },
            ],
            count: 12,
        });
    });

    test("getSmsCampaigns (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/smsCampaigns").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.smsCampaigns.getSmsCampaigns();
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("createSmsCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            content: "Get a discount by visiting our NY store and saying : Happy Spring!",
            name: "Spring Promo Code",
            sender: "MyShop",
        };
        const rawResponseBody = { id: 5 };
        server
            .mockEndpoint()
            .post("/smsCampaigns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.smsCampaigns.createSmsCampaign({
            content: "Get a discount by visiting our NY store and saying : Happy Spring!",
            name: "Spring Promo Code",
            sender: "MyShop",
        });
        expect(response).toEqual({
            id: 5,
        });
    });

    test("createSmsCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { content: "content", name: "name", sender: "sender" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.createSmsCampaign({
                content: "content",
                name: "name",
                sender: "sender",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getSmsCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            content: "Visit our Store and get some discount !",
            createdAt: "2017-06-01T12:30:00Z",
            id: 2,
            modifiedAt: "2017-05-01T12:30:00Z",
            name: "PROMO CODE",
            scheduledAt: "2017-06-01T12:30:00Z",
            sender: "MyCompany",
            status: "sent",
            recipients: { exclusionLists: [13], lists: [21] },
            statistics: {
                answered: 2,
                delivered: 2987,
                hardBounces: 1,
                processing: 0,
                sent: 3000,
                softBounces: 3,
                unsubscriptions: 3,
            },
        };
        server
            .mockEndpoint()
            .get("/smsCampaigns/1000000")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.smsCampaigns.getSmsCampaign({
            campaignId: 1000000,
        });
        expect(response).toEqual({
            content: "Visit our Store and get some discount !",
            createdAt: "2017-06-01T12:30:00Z",
            id: 2,
            modifiedAt: "2017-05-01T12:30:00Z",
            name: "PROMO CODE",
            scheduledAt: "2017-06-01T12:30:00Z",
            sender: "MyCompany",
            status: "sent",
            recipients: {
                exclusionLists: [13],
                lists: [21],
            },
            statistics: {
                answered: 2,
                delivered: 2987,
                hardBounces: 1,
                processing: 0,
                sent: 3000,
                softBounces: 3,
                unsubscriptions: 3,
            },
        });
    });

    test("getSmsCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/smsCampaigns/1000000")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.getSmsCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("getSmsCampaign (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/smsCampaigns/1000000")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.getSmsCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("updateSmsCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server
            .mockEndpoint()
            .put("/smsCampaigns/1000000")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.smsCampaigns.updateSmsCampaign({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("updateSmsCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/smsCampaigns/1000000")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.updateSmsCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateSmsCampaign (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/smsCampaigns/1000000")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.updateSmsCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("deleteSmsCampaign (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().delete("/smsCampaigns/1000000").respondWith().statusCode(200).build();

        const response = await client.smsCampaigns.deleteSmsCampaign({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("deleteSmsCampaign (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/smsCampaigns/1000000")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.deleteSmsCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("deleteSmsCampaign (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/smsCampaigns/1000000")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.deleteSmsCampaign({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("requestSmsRecipientExport (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { recipientsType: "all" };
        const rawResponseBody = { processId: 78 };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/exportRecipients")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.smsCampaigns.requestSmsRecipientExport({
            campaignId: 1000000,
            recipientsType: "all",
        });
        expect(response).toEqual({
            processId: 78,
        });
    });

    test("requestSmsRecipientExport (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { recipientsType: "all" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/exportRecipients")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.requestSmsRecipientExport({
                campaignId: 1000000,
                recipientsType: "all",
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("requestSmsRecipientExport (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { recipientsType: "all" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/exportRecipients")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.requestSmsRecipientExport({
                campaignId: 1000000,
                recipientsType: "all",
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("sendSmsCampaignNow (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        server.mockEndpoint().post("/smsCampaigns/1000000/sendNow").respondWith().statusCode(200).build();

        const response = await client.smsCampaigns.sendSmsCampaignNow({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("sendSmsCampaignNow (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendNow")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendSmsCampaignNow({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("sendSmsCampaignNow (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { message: "message" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendNow")
            .respondWith()
            .statusCode(402)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendSmsCampaignNow({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.PaymentRequiredError);
    });

    test("sendSmsCampaignNow (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendNow")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendSmsCampaignNow({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("sendSmsReport (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            email: {
                body: "Please find attached the report of our last email campaign.",
                to: ["jim.suehan@example.com"],
            },
        };

        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendReport")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.smsCampaigns.sendSmsReport({
            campaignId: 1000000,
            body: {
                email: {
                    body: "Please find attached the report of our last email campaign.",
                    to: ["jim.suehan@example.com"],
                },
            },
        });
        expect(response).toEqual(undefined);
    });

    test("sendSmsReport (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: { body: "body", to: ["to", "to"] } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendReport")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendSmsReport({
                campaignId: 1000000,
                body: {
                    email: {
                        body: "body",
                        to: ["to", "to"],
                    },
                },
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("sendSmsReport (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { email: { body: "body", to: ["to", "to"] } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendReport")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendSmsReport({
                campaignId: 1000000,
                body: {
                    email: {
                        body: "body",
                        to: ["to", "to"],
                    },
                },
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("sendTestSms (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendTest")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.smsCampaigns.sendTestSms({
            campaignId: 1000000,
        });
        expect(response).toEqual(undefined);
    });

    test("sendTestSms (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendTest")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendTestSms({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("sendTestSms (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/smsCampaigns/1000000/sendTest")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.sendTestSms({
                campaignId: 1000000,
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });

    test("updateSmsCampaignStatus (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};

        server
            .mockEndpoint()
            .put("/smsCampaigns/1000000/status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.smsCampaigns.updateSmsCampaignStatus({
            campaignId: 1000000,
            body: {},
        });
        expect(response).toEqual(undefined);
    });

    test("updateSmsCampaignStatus (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/smsCampaigns/1000000/status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.updateSmsCampaignStatus({
                campaignId: 1000000,
                body: {},
            });
        }).rejects.toThrow(BrevoApi.BadRequestError);
    });

    test("updateSmsCampaignStatus (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new BrevoApiClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/smsCampaigns/1000000/status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.smsCampaigns.updateSmsCampaignStatus({
                campaignId: 1000000,
                body: {},
            });
        }).rejects.toThrow(BrevoApi.NotFoundError);
    });
});
